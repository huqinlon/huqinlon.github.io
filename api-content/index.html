{"posts":[{"title":"宝塔 Linux 面板 7.9.5 开心版","content":"本次更新时间：11月24日 1. 进程守护管理器 2.3 ~ 进程守护管理器 2.4 2. 日志清理工具 2.2 ~ 进程守护管理器 2.3 3. 堡塔网站加速 4.2 ~ 进程守护管理器 4.3 4. Node.js版本管理器 1.7 ~ 进程守护管理器 1.8 5. 宝塔邮局管理器 4.7 ~ 进程守护管理器 4.8 6. 宝塔一键迁移API版本 3.3 ~ 进程守护管理器 3.4 7. MySQL主从复制(重构版) 1.2 ~ MySQL主从复制(重构版) 1.3 8. 宝塔数据同步工具 3.4 ~ 宝塔数据同步工具 3.5 9. 网站监控报表 7.2.1 ~ 网站监控报表 7.2.2 10. Nginx防火墙 9.0.7 ~ Nginx防火墙 9.0.8 历史更新时间：11月1日 【更新】IP配置工具 1.3 – 1.4 【新增】微步木马检测 1.0 【更新】系统防火墙 3.2 – 3.3 【更新】Linux工具箱 1.8 – 1.9 【更新】进程守护管理器 2.2 – 2.3 【更新】日志清理工具 2.1 – 2.2 【更新】堡塔应用管理器 1.6 – 1.8 【更新】又拍云存储 4.7 – 4.8 【更新】堡塔应用管理器 1.7 – 1.8 【更新】FTP存储空间 5.1 – 5.3 【更新】阿里云OSS 5.3 – 6.1 【更新】亚马逊S3云存储 1.1 – 1.4 【更新】七牛云存储 5.3 – 5.4 【更新】谷歌云网盘 2.0 – 2.1 【更新】谷歌云存储 1.5 – 1.6 【更新】腾讯云COS 4.8 – 5.1 【更新】百度云存储 1.1 – 1.2 【更新】华为云存储 1.1 – 1.2 【更新】京东云存储 1.0 – 1.1 【更新】Apache防火墙 9.0 – 9.1 【更新】Nginx防火墙 9.0.6 – 9.0.7 【更新】网站监控报表 7.0 – 7.2.1 【更新】宝塔数据同步工具 3.3 – 3.4 【更新】宝塔系统加固 3.3 – 3.5 【更新】宝塔任务管理器 2.1 – 2.2 【更新】对象存储自动挂载 1.1 – 1.2 【更新】部分环境升级 【优化】软件列表优化 【移除】11月7日：1. 去除访问日志自动生成 【移除】11月7日：2. 去除WebRTC连接 【移除】11月7日：3. so为自行编译非官方so文件（所以不存在 PluginLoader.get_soft_list(cid) 调用） 嘲讽下官方 “更新版号，注释掉了这段 hhh”： #if public.readFile(nginxconf).find(‘luawaf.conf’) == -1: return public.returnMsg(False,’当前nginx不支持防火墙,请重装nginx’); 11. Apache防火墙 9.1 ~ Apache防火墙 9.2 12. 优化软件列表同步官方 Centos安装命令（默认安装是7.8.0 直接在线升级7.9.5）： yum install -y wget &amp;&amp; wget -O install.sh http://io.bt.sy/install/install_6.0.sh &amp;&amp; sh install.sh 试验性Centos/Ubuntu/Debian安装命令 独立运行环境（py3.7） 可能存在少量兼容性问题 不断优化中 curl -sSO http://io.bt.sy/install/install_panel.sh &amp;&amp; bash install_panel.sh Ubuntu Deepin安装命令： wget -O install.sh http://io.bt.sy/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh Debian安装命令： wget -O install.sh http://io.bt.sy/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh Fedora安装命令: wget -O install.sh http://io.bt.sy/install/install_6.0.sh &amp;&amp; bash install.sh Linux面板 7.9.5 升级企业版命令 1（7.9.5 官方版 / 7.7.0 开心版 可以执行这个升级到 7.9.5 开心版）： curl https://io.bt.sy/install/update_panel.sh|bash 讲解：升级企业版命令 1 与 升级企业版命令 2 二选一 都可以升级最新版！ Linux面板 7.9.5 升级企业版命令 2（7.9.5 官方版 / 7.7.0 开心版 可以执行这个升级到 7.9.5 开心版： curl http://io.bt.sy/install/update6.sh|bash ","link":"https://amiao.ioxoo.top/post/bao-ta-linux-mian-ban-795-kai-xin-ban/"},{"title":"整理一些常用的脚本（持续更新中）","content":"更新列表 2023-2-15 添加检测是否可以访问ChatGPT脚本 `bash &lt;(curl -Ls https://cpp.li/openai)` 综合工具箱（强烈推荐，集成了很多脚本） `wget -O box.sh https://raw.githubusercontent.com/BlueSkyXN/SKY-BOX/main/box.sh &amp;&amp; chmod +x box.sh &amp;&amp; clear &amp;&amp; ./box.sh` 杜甫测试 `wget -q https://github.com/Aniverse/A/raw/i/a &amp;&amp; bash a` DD相关 1、甲骨文DD脚本 DD成Debian 10 `bash &lt;(wget --no-check-certificate -qO- 'https://raw.githubusercontent.com/MoeClub/Note/master/InstallNET.sh') -d 10 -v 64 -p &quot;自定义root密码&quot; -port &quot;自定义ssh端口&quot;` DD成Ubuntu 20.04 `bash &lt;(wget --no-check-certificate -qO- 'https://raw.githubusercontent.com/MoeClub/Note/master/InstallNET.sh') -u 20.04 -v 64 -p &quot;自定义root密码&quot; -port &quot;自定义ssh端口&quot;` 2、MoeClub脚本 重点推荐： 时间：22/11/2021 15:21 萌咖更新脚本： 1.新增对 Oracle AMD，Oracle ARM全面支持. 可支持从 Ubuntu, Oracle Linux 等系统网络重装. 2.更新 dd 镜像的基础系统版本. 3.移除对外部 wget 的依赖. 4.新增 -port 参数, 可更改默认SSH端口. 5.更新 内置的网络参数计算 逻辑. 6.更新 grub 配置文件定位逻辑, 可支持任意引导grub的系统. 以下系统已通过测试(其他自测): Debian: 9, 10, 11; Ubuntu: 18.04, 20.04; CentOS: 6.10; 以下平台已通过测试(其他自测): Oracle、Do、Azure `bash &lt;(wget --no-check-certificate -qO- 'https://raw.githubusercontent.com/MoeClub/Note/master/InstallNET.sh') -d 10 -v 64 -p &quot;自定义root密码&quot; -port &quot;自定义ssh端口&quot;` -d 10 -v 64 -d 9 -v 64 -u 20.04 -v 64 -u 18.04 -v 64 开机改密码脚本： 开机改密： `#!/bin/bash echo root:Vicer |sudo chpasswd root sudo sed -i 's/^#\\?PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config; sudo sed -i 's/^#\\?PasswordAuthentication.*/PasswordAuthentication yes/g' /etc/ssh/sshd_config; sudo reboot` 3、另一位大佬的脚本 `wget --no-check-certificate -O AutoReinstall.sh https://git.io/AutoReinstall.sh &amp;&amp; bash AutoReinstall.sh` CentOS默认密码Pwd@CentOS 其它系统Pwd@Linux OpenVZ / LXC 架构系统不适用 来源：https://blog.hicasper.com/post/135.html 参考：https://www.ydyno.com/archives/1245.html 感谢大佬的付出！ `bash &lt;(wget --no-check-certificate -qO- 'https://file.geekn.net/CNODnjau/InstallNET.sh') -d 11 -v 64 -a -firmware` -firmware 额外的驱动支持 -d 后面是系统版本号 -v 后面写64位 32位 -a （不清楚这个干啥的但是每个脚本都带） –mirror 后面是镜像源地址 -p 后面写自定义密码 `镜像站地址 官方给出的地址列表：https://www.debian.org/mirror/list 一些国内的 ftp.cn.debian.org mirror.bjtu.edu.cn mirror.lzu.edu.cn mirror.nju.edu.cn mirrors.163.com mirrors.bfsu.edu.cn mirrors.hit.edu.cn mirrors.huaweicloud.com mirror.sjtu.edu.cn mirrors.tuna.tsinghua.edu.cn mirrors.ustc.edu.cn 使用方法：（大致都是一样的） 清华源 --mirror 'https://mirrors.ustc.edu.cn/debian/' 腾讯源 --mirror 'https://mirrors.aliyun.com/debian/' 阿里源 --mirror 'https://mirrors.aliyun.com/debian/' 华为源 --mirror 'https://mirrors.huaweicloud.com/debian/'` 4、秋水逸冰 Windows 2012/2016/2019/2022 10/11 DD 镜像 适用于 UEFI 启动的多个 Windows 系统 DD 镜像： https://teddysun.com/656.html 分别是： Windows Server 2012 R2 Datacenter Windows Server 2016 Datacenter (build: 14393.5006) Windows Server 2019 Datacenter (build: 17763.2686) Windows Server 2022 Datacenter (build: 20348.587) Windows 10 Enterprise LTSC (build: 19044.1288) Windows 11 Pro for Workstations 21H2 (build: 22000.194) 适用于 BIOS 启动的 Windows Server 2022 Datacenter DD 镜像： https://teddysun.com/629.html 适用于 BIOS 启动的 Windows 11 Pro for Workstations 21H2 DD 镜像： https://teddysun.com/642.html 适用于 BIOS 启动的 Windows 10 Enterprise LTSC DD 镜像： https://teddysun.com/640.html 适用于 BIOS 启动的 Windows Server 2019/2016/2012R2 Datacenter DD 镜像： https://teddysun.com/545.html 分别是： Windows Server 2019 Datacenter（Build: 17763.2686） Windows Server 2016 Datacenter（Build: 14393.5006） Windows Server 2012 R2 Datacenter 测试相关 机器测试 单线程测试 `bash &lt;(curl -Lso- https://bench.im/hyperspeed)` 最全测速脚本 `curl -fsL https://ilemonra.in/LemonBenchIntl | bash -s fast` superbench `wget -qO- git.io/superbench.sh | bash` Bench.sh `wget -qO- bench.sh | bash` 速度测试 显示延迟、抖动 `bash &lt;(wget -qO- https://bench.im/hyperspeed)` 直接显示回程线路 `curl https://raw.githubusercontent.com/zhucaidan/mtr_trace/main/mtr_trace.sh|bash` `wget -q route.f2k.pub -O route &amp;&amp; bash route` `# 第一个 wget https://raw.githubusercontent.com/nanqinlang-script/testrace/master/testrace.sh bash testrace.sh # 第二个 wget -qO- git.io/besttrace | bash` 四网测速 `wget -O jcnf.sh https://raw.githubusercontent.com/Netflixxp/jcnfbesttrace/main/jcnf.sh bash jcnf.sh` 三网测速 `bash &lt;(curl -Lso- https://git.io/superspeed_uxh)` 带快速四网测试版本： `bash &lt;(curl -Lso- https://dl.233.mba/d/sh/speedtest.sh)` `bash &lt;(curl -Lso- https://git.io/J1SEh)` 带综合测试的版本（CPU信息、Geekbench等）： `bash &lt;(wget --no-check-certificate -O- https://dl.233.mba/d/sh/superbenchpro.sh)` 来源：https://www.wrnxr.cn/163.html 测试25端口是否开放 `telnet smtp.aol.com 25` 测试IPv4优先还是IPv6优先 `curl ip.p3terx.com` 流媒体测试 全媒体测试 `bash &lt;(curl -L -s https://raw.githubusercontent.com/lmc999/RegionRestrictionCheck/main/check.sh)` 奈飞测试 `wget -O nf https://github.com/sjlleo/netflix-verify/releases/download/2.5/nf_2.5_linux_amd64 &amp;&amp; chmod +x nf &amp;&amp; clear &amp;&amp; ./nf` `#第一个 bash &lt;(curl -L -s https://raw.githubusercontent.com/lmc999/RegionRestrictionCheck/main/check.sh) # 第二个 bash &lt;(curl -sSL &quot;https://github.com/CoiaPrant/MediaUnlock_Test/raw/main/check.sh&quot;)` WARP `wget -N --no-check-certificate https://cdn.jsdelivr.net/gh/YG-tsj/CFWarp-Pro/multi.sh &amp;&amp; chmod +x multi.sh &amp;&amp; ./multi.sh` 之后进入脚本快捷方式为 bash multi.sh 服务器时间 CentOS 同步时间 `yum -y install ntpdate timedatectl set-timezone Asia/Shanghai ntpdate ntp1.aliyun.com` BBR CentOS 7 BBR `wget -N --no-check-certificate &quot;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh&quot; &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh` 一键开启BBR 注意：需要Linux Kernel 内核升级到 4.9 及以上版本可以实现 BBR 加速 `uname -srm` 输出结果： `Linux 3.10.0-957.12.2.el7.x86_64 x86_64 3 - 内核版本. 10 - 主修订版本. 0-957 - 次要修订版本. 12 - 补丁版本.` 一般来说，Ubuntu18.04以上就可以(默认的内核4.15) `echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf sysctl -p sysctl net.ipv4.tcp_available_congestion_control lsmod | grep bbr` Docker相关 更新、安装必备软件 `apt-get update &amp;&amp; apt-get install -y wget vim` 海外服务器 非大陆Docker安装 `wget -qO- get.docker.com | bash` 卸载Docker `sudo apt-get purge docker-ce docker-ce-cli containerd.io` `sudo rm -rf /var/lib/docker sudo rm -rf /var/lib/containerd` 非大陆Docker-compose安装 `sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose` `sudo chmod +x /usr/local/bin/docker-compose` 查看版本 `docker-compose --version` 大陆服务器 国内机安装docker `curl -sSL https://get.daocloud.io/docker | sh` 国内机安装docker-compose ``curl -L https://get.daocloud.io/docker/compose/releases/download/v2.1.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose`` 卸载docker `sudo apt-get remove docker docker-engine rm -fr /var/lib/docker/` 防火墙 CentOS 关闭防火墙 `systemctl start supervisord systemctl disable firewalld systemctl stop firewalld` 宝塔相关 宝塔去除登陆 (已经失效，解决方法见：https://blog.laoda.de/archives/bt-to-aapanel) `sed -i &quot;s|if (bind_user == 'True') {|if (bind_user == 'REMOVED') {|g&quot; /www/server/panel/BTPanel/static/js/index.js rm -rf /www/server/panel/data/bind.pl` 宝塔&amp;aapanel破解 `# 宝塔&amp;aapanel破解 编辑 /www/server/panel/class/panelplugin.py 找到 softList['list'] = tmpList 这行代码 在下面添加以下代码，注意缩进 softList['pro'] = 1 for soft in softList['list']: soft['endtime'] = 0 编辑完毕后保存重启面板即可` 呆梨相关 XUI `bash &lt;(curl -Ls https://raw.githubusercontent.com/sprov065/x-ui/master/install.sh) 0.2.0` mack-a `wget -P /root -N --no-check-certificate &quot;https://raw.githubusercontent.com/mack-a/v2ray-agent/master/install.sh&quot; &amp;&amp; chmod 700 /root/install.sh &amp;&amp; /root/install.sh` 持续更新中 ","link":"https://amiao.ioxoo.top/post/zheng-li-yi-xie-chang-yong-de-jiao-ben-chi-xu-geng-xin-zhong/"},{"title":"DDNS-GO的安装","content":"使用的Docker jeessy/ddns-go 简单好用的DDNS。支持阿里云DNS、腾讯云dnspod、Cloudflare、华为云 ddns-go 自动获得你的公网 IPv4 或 IPv6 地址，并解析到对应的域名服务。 特性 支持Mac、Windows、Linux系统，支持ARM、x86架构 支持的域名服务商 Alidns(阿里云) Dnspod(腾讯云) Cloudflare 华为云 Callback 支持接口/网卡获取IP 支持以服务的方式运行(v2.8.0后支持) 默认间隔5分钟同步一次 支持多个域名同时解析，公司必备 支持多级域名 网页中配置，简单又方便，可设置 登录用户名和密码 / 禁止从公网访问 网页中方便快速查看最近50条日志，不需要跑docker中查看 支持webhook 支持TTL 系统中使用 下载并解压https://github.com/jeessy2/ddns-go/releases 双击运行, 如没有找到配置, 程序自动打开http://127.0.0.1:9876 [可选] 安装服务 Mac/Linux: ./ddns-go -s install Win(打开cmd): .\\ddns-go.exe -s install 安装服务也支持 -l监听地址 -f同步间隔时间(秒) -c自定义配置文件路径 [可选] 服务卸载 Mac/Linux: ./ddns-go -s uninstall Win(打开cmd): .\\ddns-go.exe -s uninstall [可选] 支持启动带参数 -l监听地址 -f同步间隔时间(秒) -c自定义配置文件路径。如：./ddns-go -l 127.0.0.1:9876 -f 600 -c /Users/name/ddns-go.yaml Docker中使用 不挂载主机目录, 删除容器同时会删除配置 # host模式, 同时支持IPv4/IPv6 docker run -d --name ddns-go --restart=always --net=host jeessy/ddns-go 在浏览器中打开http://主机IP:9876，修改你的配置，成功 [可选] 挂载主机目录, 删除容器后配置不会丢失。可替换 /opt/ddns-go 为有权限访问的目录, 配置文件为隐藏文件 docker run -d --name ddns-go --restart=always --net=host -v /opt/ddns-go:/root jeessy/ddns-go [可选] 支持启动带参数 -l监听地址 -f间隔时间(秒) docker run -d --name ddns-go --restart=always --net=host jeessy/ddns-go -l :9877 -f 600 使用IPv6 前提：你的电脑或终端能正常获取IPv6，并能正常访问IPv6 Windows/Mac：推荐 系统中使用，Windows/Mac桌面版的docker不支持--net=host 群晖： 套件中心下载docker并打开 注册表中搜索ddns-go并下载 映像 -&gt; 选择jeessy/ddns-go -&gt; 启动 -&gt; 高级设置 -&gt; 网络中勾选使用与 Docker Host 相同的网络，高级设置中勾选启动自动重新启动 在浏览器中打开http://群晖IP:9876，修改你的配置，成功 Linux的x86或arm架构，推荐使用Docker的--net=host模式。参考 Docker中使用 虚拟机中使用有可能正常获取IPv6，但不能正常访问IPv6 [可选] 使用IPv6后，建议勾选禁止从公网访问 Webhook 支持webhook, 域名更新成功或不成功时, 会回调填写的URL 支持的变量 变量名 说明 #{ipv4Addr} 新的IPv4地址 #{ipv4Result} IPv4地址更新结果: 未改变 失败 成功 #{ipv4Domains} IPv4的域名，多个以,分割 #{ipv6Addr} 新的IPv6地址 #{ipv6Result} IPv6地址更新结果: 未改变 失败 成功 #{ipv6Domains} IPv6的域名，多个以,分割 RequestBody为空GET请求，不为空POST请求 Server酱: https://sc.ftqq.com/[SCKEY].send?text=主人IPv4变了#{ipv4Addr},域名更新结果:#{ipv4Result} Bark: https://api.day.app/[YOUR_KEY]/主人IPv4变了#{ipv4Addr},域名更新结果:#{ipv4Result} 钉钉: 钉钉电脑端 -&gt; 群设置 -&gt; 智能群助手 -&gt; 添加机器人 -&gt; 自定义 只勾选 自定义关键词, 输入的关键字必须包含在RequestBody的content中, 如：你的公网IP变了 URL中输入钉钉给你的 Webhook地址 RequestBody中输入 {&quot;msgtype&quot;: &quot;text&quot;,&quot;text&quot;: {&quot;content&quot;: &quot;你的公网IP变了：#{ipv4Addr}，域名更新结果：#{ipv4Result}&quot;}} Callback 通过自定义回调可支持更多的第三方DNS服务商 配置的域名有几行, 就会回调几次 支持的变量 变量名 说明 #{ip} 新的IPv4/IPv6地址 #{domain} 当前域名 #{recordType} 记录类型 A或AAAA #{ttl} ttl RequestBody为空GET请求，不为空POST请求 界面 开发&amp;自行编译 如果喜欢从源代码编译自己的版本，可以使用本项目提供的 Makefile 构建 开发环境 golang 1.16 使用 make build 生成本地编译后的 ddns-go 可执行文件 使用 make build_docker_image 自行编译 Docker 镜像 ","link":"https://amiao.ioxoo.top/post/ddns-go-de-an-zhuang/"},{"title":"Unraid Docker安装青龙面板和无法访问的解决方法","content":"Unraid Docker安装青龙面板和无法访问的解决方法 前一段时间，自己操作失误将群晖的存储池损毁了，自己没有能力解决，最后通过删除存储池，更换硬盘来解决问题，新建存储池以后，原来Docker中的容器都被删除了，由于自己没有备份，里面的资料也全部损失了。今天我需要重新安装的青龙面板就是其中之一，这次我将使用**Unraid**来安装青龙面板。 青龙面板支持python3、javaScript、shell、typescript 的定时任务管理面板，为薅羊毛的不二神器。 功能 支持多种脚本语言（python3、javaScript、shell、typescript） 支持在线管理脚本、环境变量、配置文件 支持在线查看任务日志 支持秒级任务设置 支持系统级通知 支持暗黑模式 支持手机端操作 Docker参数 docker run -dit``-v ``$PWD``/ql/config:/ql/config``-v ``$PWD``/ql/log:/ql/log``-v ``$PWD``/ql/db:/ql/db``-v ``$PWD``/ql/repo:/ql/repo``-v ``$PWD``/ql/raw:/ql/raw``-v ``$PWD``/ql/scripts:/ql/scripts``-p 5700:5700``--name qinglong``--hostname qinglong``--restart unless-stopped``whyour/qinglong:latest **Unraid**安装也很简单，参数设置如下面图片 以上内容来源于网络，转载若夜彼岸博客。 然而安装过程很顺利，结果无法访问。经过半个小时的搜索，发现问题所在，自己解决了，当然我遇到的只是其中的一个问题，希望能够对你有所帮助。 对于无法访问青龙面板的问题，分析后得到5700端口可能被**Unraid**的其它应用占用了，这个端口无法使用，通过修改成5800端口来实现访问。 一般情况下，这时候可能已经成功访问了，也有可能还是无法访问，问题出在nginx的配置文件中，进入Docker的控制台，使用Linux命令来解决。 输入： cd /ql/docker 进入ql下的docker目录，修改front.conf文件中的nginx监听端口来解决无法访问， vi front.conf 修改下面 listen 5700 为 listen 5800 ，这个监听端口要修改成你配置容器时填写的端口，然后按Esc，输入:wq来保存，到docker界面重新启动qinglong容器。 我要继续去配置青龙面板了，现在拉库也是一件不容易的事情。 ","link":"https://amiao.ioxoo.top/post/unraid-docker-an-zhuang-qing-long-mian-ban-he-wu-fa-fang-wen-de-jie-jue-fang-fa/"},{"title":"青龙面板搭建 / 多容器青龙面板 / 新老版本 / 命令","content":"青龙面板搭建 / 多容器青龙面板 / 新老版本 / 命令 青龙面板其实感觉就是云函数，只不过比云函数更完美。 首先介绍一下多容器和单容器 多容器顾名思义就是多个容器，意思就是多个青龙在一个linux服务器内，可以达到每个容器的青龙互不干涉，多用于对接xdd机器人，适合CK特别多的。 单容器，就是一个青龙容器，但是现在听说新的青龙解除了CK限制，所以青龙应该是可以跑百来CK不是问题，只是时间长点。 新老版本 新版本就是拉取作者最新的镜像，一般尾巴是latest。不过因为拉取时间不同，所以你的版本可能只是当前最新，不代表后续是最新的。 老版本由于站长没找到原作者的老版本，所以找了网上其他人的老版本，这里以2.10.2为例。 为什么我的一开始登录就是admin帐号和admin密码？ 那因为你被人坑了拉取的是人家改过的青龙，有后门。 单容器青龙面板搭 首先去拉镜像（此镜像是原作者的,whyour就是原作者的，其他的你懂的。） docker pull whyour/qinglong:latestCOPY 然后输入 docker run -dit \\ -v $PWD/ql/config:/ql/config \\ -v $PWD/ql/log:/ql/log \\ -v $PWD/ql/db:/ql/db \\ -v $PWD/ql/repo:/ql/repo \\ -v $PWD/ql/raw:/ql/raw \\ -v $PWD/ql/scripts:/ql/scripts \\ -v $PWD/ql/jbot:/ql/jbot \\ -p 5708:5700 \\ --name qinglong \\ --hostname qinglong \\ --restart unless-stopped \\ whyour/qinglong:latestCOPY 参考下图 以上就完成了，下面老版本青龙安装（多容器安装） 多容器安装（老青龙安装） 多容器就是多一个或者多个青龙而已。 首先由于不想再多写老版本教程，就拿老版本的青龙拿来顺带做演示. 如果你想都是一个版本的青龙就无需拉镜像的步骤，直接走多容器第二步创建即可！ 拉取镜像（因为多容器拿老青龙示例，所以拉取的是非原作者的2.10.2） docker pull byniht/qinglong:2.10.2COPY 输入 docker run -dit \\ -v $PWD/ql1/config:/ql/config \\ -v $PWD/ql1/log:/ql/log \\ -v $PWD/ql1/db:/ql/db \\ -v $PWD/ql1/repo:/ql/repo \\ -v $PWD/ql1/raw:/ql/raw \\ -v $PWD/ql1/scripts:/ql/scripts \\ -v $PWD/ql1/jbot:/ql/jbot \\ -p 5706:5700 \\ --name qinglong1 \\ --hostname qinglong1 \\ --restart unless-stopped \\ byniht/qinglong:2.10.2 COPY 看图注释 如果需要更多容器，请自行更改对应的青龙文件名和容器名！ 注册与登录 创建完成后，去浏览器输入你的青龙所在服务器的IP:和你设置的端口例如本教程最新版的青龙端口是5708，那就访问青龙的ip:5708 依赖安装 一键安装 进入docker 容器 qinglong docker exec -it 你的容器名称 bashCOPY 一键安装命令(要等许久建议恰几根烟) curl -fsSL https://ghproxy.com/https://raw.githubusercontent.com/FlechazoPh/QLDependency/main/Shell/QLOneKeyDependency.sh | shCOPY 完成后重启青龙 先退出 exitCOPY 重启青龙容器 ```undefined docker restart 你的青龙容器名COPY 青龙内安装 首先打开青龙，然后找到依赖管理 然后右上角找到添加依赖 添加下面的到图中所示的node.js内，按照图来选择！ crypto-js prettytable dotenv jsdom date-fns tough-cookie tslib ws@7.4.3 ts-md5 jsdom -g jieba fs form-data json5 global-agent png-js @types/node require typescript js-base64 axios COPY python3内安装以下 requests canvas ping3 jieba aiohttpCOPY linux内安装以下 bizCode bizMsg lxmlCOPY 6.然后过几分钟刷新查看是否成功！ docker青龙命令 1.重启青龙容器 docker restart 你的容器名COPY 容器名一般为qinglong或者ql等，不知道的跑一下下面命令可以看到 docker ps -aCOPY 2.更新青龙 docker exec -it qinglong ql updateCOPY 3.更新青龙并编译 docker exec -it qinglong ql restartCOPY 4.拉取自定义仓库，已Faker仓库为例 docker exec -it qinglong ql repo https://ghproxy.com/https://github.com/shufflewzc/faker2.git &quot;jd_|jx_|gua_|jddj_|getJDCookie&quot; &quot;activity|backUp&quot; &quot;^jd[^_]|USER|ZooFaker_Necklace.js|JDJRValidator_Pure|sign_graphics_validate&quot;COPY 5.拉取单个脚本，以Faker库的资产变更通知为例 docker exec -it qinglong ql raw https://github.com/shufflewzc/faker2/blob/main/jd_bean_change_new.jsCOPY 6.导出互助码 docker exec -it qinglong ql codeCOPY 7.通知测试 docker exec -it qinglong notify test testCOPY 8.立即执行脚本，以资产变更通知为例 docker exec -it qinglong task jd_bean_change_new.js nowCOPY 9.并行执行脚本 docker exec -it qinglong task jd_bean_change_new.js concCOPY 10.查看青龙密码 注意你的容器及文件夹名称 docker exec -it qinglong cat /ql/config/auth.jsonCOPY 11.删除7天前的所有日志 docker exec -it qinglong ql rmlog 7COPY 12.启动青龙bot 前提你已配置好青龙BOT docker exec -it qinglong ql botCOPY 青龙内置命令 更新并重启青龙 ql updateCOPY 运行自定义脚本extra.sh ql extraCOPY 添加单个脚本文件 ql raw &lt;file_url&gt;COPY 添加单个仓库的指定脚本 ql repo &lt;repo_url&gt; &lt;whitelist&gt; &lt;blacklist&gt; &lt;dependence&gt; &lt;branch&gt;COPY 删除旧日志 ql rmlog &lt;days&gt;COPY 启动tg-bot ql botCOPY 检测青龙环境并修复 ql checkCOPY 重置登录错误次数 如果是docker容器执行先执行 docker exec -it qinglong bashCOPY 再执行下面的即可 ```undefined ql resetletCOPY 禁用两步登录 ql resettfaCOPY 依次执行，如果设置了随机延迟，将随机延迟一定秒数 task &lt;file_path&gt;COPY 依次执行，无论是否设置了随机延迟，均立即运行，前台会输出日，同时记录在日志文件中 task &lt;file_path&gt; nowCOPY 并发执行，无论是否设置了随机延迟，均立即运行，前台不产生日，直接记录在日志文件中，且可指定账号执行 task &lt;file_path&gt; conc &lt;env_name&gt; &lt;account_number&gt;(可选的)COPY 指定账号执行，无论是否设置了随机延迟，均立即运行 task &lt;file_path&gt; desi &lt;env_name&gt; &lt;account_number&gt; ","link":"https://amiao.ioxoo.top/post/qing-long-mian-ban-da-jian-duo-rong-qi-qing-long-mian-ban-xin-lao-ban-ben-ming-ling/"},{"title":"青龙面板 脚本 依赖库下载安装","content":"青龙面板 脚本 依赖库下载安装 1、安装参考https://github.com/whyour/qinglong/blob/develop/INSTALL.md 2、青龙必须要安装的依赖 docker exec -it qinglong bash #qinglong为容器名根据自己容器修改 pnpm add -g pnpm pnpm install -g pnpm install -g js-base64 pnpm install -g ws pnpm install -g date-fns pnpm install -g ts-md5 pnpm install -g axios pnpm install -g download pnpm install -g fs pnpm install -g child_process pnpm install -g crypto-js pnpm install -g crypto pnpm install -g dotenv pnpm install -g got pnpm install -g http-server pnpm install -g png-js pnpm install -g qrcode-terminal pnpm install -g request pnpm install -g tough-cookie pnpm install -g tslib pnpm install -g tunnel pnpm install -g md5 pnpm install -g jsdom pnpm install -g silly-datetime pnpm install -g form-data python3 -m pip install --upgrade pip pip3 install requests 或者在青龙面板直接添加下面代码 我现在面板里安装的依赖 NodeJs下 crypto-js prettytable dotenv jsdom date-fns tough-cookie tslib ws@7.4.3 ts-md5 jsdom -g jieba fs form-data json5 global-agent png-js @types/node require typescript js-base64 axios Python3下 requests canvas ping3 jieba aiohttp Linux下 bizCode bizMsg lxml ","link":"https://amiao.ioxoo.top/post/qing-long-mian-ban-jiao-ben-yi-lai-ku-xia-zai-an-zhuang/"},{"title":"UNRAID教程：3分钟 用安装Jellyfin 开启硬件加速转码 解码4K 打造最强家庭影院","content":"UNRAID教程：3分钟 用安装Jellyfin 开启硬件加速转码 解码4K 打造最强家庭影院 前言 大家好，俺又来了！ 这是我写的 关于UNRAID 第三篇文章了，依旧是保姆级文章，搭配前面两篇食用，效果会更佳。 最近站里分享UNRAID的文章越来越多，这是一件非常好的事情。 玩的人越多，就越多精彩的内容，已经看到不少干货文章出现了！ 今天教给大家如何用UNRAID 开启集成显卡的硬件加速功能，让Jellyfin、EMBY、PLEX等这类软件，能调用J3455这些主板的集成显卡进行转码！当然，J1900也可以呀！ 之前分享过Jellyfin的文章，有兴趣的朋友可以看看，那时候没有成功开启硬件加速功能，导致我的CPU经常爆满，而且有些影片还播放不了： 使用群晖Docker 安装Jellyfin 家庭影院HTPC 比emby plex好用多了大家好，俺又来了，这次给大家分享群晖Docker安装Jellyfin了！这个是算是俺的压轴节目了，最近一口气写了好多关于群晖NAS软件的分享，脑袋都是疼的！关于jellyfin，最开始知道这个的时候，俺已经体验过plex和emby了，这两个软件是不错，但是因为收费，不得不放弃之。引用萌鼠博客的内容：阿文菌|赞1k评论990收藏10k查看详情 如今，换上了UNRAID系统后，开启了Jellyfin的硬件加速功能，实测4K转码都没问题，不开这个功能的话，影片都没法播放，以下是测试开启了硬件加速，并且驱动了集成显卡转码的效果： 关于如何安装UNRAID，保姆级教程已经出炉，看这篇文章，3分钟即可安装UNRAID： NAS教程：手把手教您 3分钟安装UNRAID系统 并设置硬盘共享文件 Docker容器APP前言大家好，俺又来了！久等了！UNRAID是一款类似NAS的操作系统，和PVE、ESXI很像，但又很不同。在我使用了大半个月后，已经完美搭建出自己的家用NAS服务器，我觉得非常好用，所以推荐给大家。老规矩，废话少说，本文都是干货，欢迎大家提前点赞、点收藏，谢谢大家的支持！下面这篇关于UNRAID的介阿文菌|赞935评论504收藏5k查看详情 关于我是如何使用UNRAID的方案，可以看我这篇介绍文章**（3分钟看完）**： NAS换上了UNRAID系统，J3455绝配！解决了Jellyfin硬件加速解码，虚拟群晖DSM#2019值得总结#年度征稿重磅上线!分享你的年度好物清单、购物心得、收藏好物……赢海量金币、抽限定惊喜福袋,还有万元大奖等你来拿!详情戳这里了解前言哈喽，我是阿文菌！俺又来了！肯定有人看到标题会产生疑问？UNRAID是什么东东？能做什么？1、相信关注过b站up主司波图和VedioTalk都肯定有所阿文菌|赞1k评论804收藏8k查看详情 J1900也可以尝试这个方法使用哦，但是效果估计没有J3455及以上主板好，所以推荐J3455以上的主板使用UNRAID当作家庭媒体服务器，会更给力！ 网上传闻J3455有质量问题的通告，但据说第二天又撤回通告了。目前先不说有没有出现故障的案例。 就J3455的体积、功耗、价格、盘位、性能来说，真找不到比它更合适当NAS的主板了，加钱党散开！ 而且就算J3455坏了，直接到时候再换一块板子即可，硬盘的数据也不会丢失，就J3455目前400左右的价位，用个三年，就算坏了，我也不心疼。 我们废话少说，直接进入干货主题，开始开启UNRAID硬件解码功能，以及安装和配置Jellyfin！ 保姆级的文章，写起来真的是非常费劲，非常希望大家点赞、点收藏、让更多的用户看到这个，感谢大家！我希望能产生一丁点影响力，让UNRAID像其它系统一样，更多的人来折腾！ UNRAID 设置电影文件夹 1、上一篇文章，我们已经配置好了UNRAID当作NAS使用了。 回到SHARES选项里面，新建一个放电影的文件夹，这样比较方便： 2、取名 Movie 吧，比较熟悉的命名了，直接点ADD SHARE添加即可： 3、设置名字之后，会出现SMB设置界面，点DONE即可，这里不用设置： 4、创建的电影文件夹完成： 本次耗时10秒钟！ UNRAID 安装Jellyfin 1、开始安装Jellyifn，在APPS界面，搜索jellyfin。 如何开启APPS选项，看我上一篇文章安装一下APPS插件的代码即可，一个步骤即可开启： 2、点击Jellyfin安装以后，进入到设置页面，我们只需要设置一下刚刚新建的放影片文件夹的路径即可： 不要点最下面的应用，如果点了应用，虽然安装了Jellyfin完成了，但是没法开启硬件加速功能的！ 我们要硬件加速功能，必须要设置一下，下面继续。 本次耗时10秒钟，共计时20秒！ UNRAID 开启集成显卡 renderD128 驱动 1、直接点击右上角的 &gt;_ 这个符号，这个是打开UNRAID的终端功能： 这个真的太太太方便了！ 2、进入了终端，其实就类似SHH的页面，我们直接输入代码： modprobe i915 回车即可，这样就开启了集成显卡的驱动功能了！ （这里不得不再次感谢一下司波图大佬分享的视频教程，本篇文章相当于搬运了司波图的设置方案，谢谢大佬！）（司波图是B站UP主，大家可以关注一波，UNRAID的视频教程非常详细。） 3、我们检查一下，有没有开启核显功能： 输入下面代码，如果出现了 renderD128 这个就代表成功了： ls /dev/dri 4、设置了集成显卡成功了后，我们再设置一下开机启动项，这样每次开机就会自动加载核显驱动了： 输入代码： cd /boot/config 5、输入代码，这一步就是修改 开机启动的go配置文件： vi go 6、按一下键盘的 i 键，就可以输入内容了，我们输入开启核显代码： modprobe i915 7、然后按住键盘的冒号 ，输入 :wq 进行保存退出： 8、核显，集成显卡驱动已经设置完成了，我们关掉终端窗口，继续在Jellyfin安装的设置页面最下面，点击ADD这个，看图操作： 9、点击以后，进入到下面这个页面，选择 type类型为 Device，NAME随便填写一个名字，比如xianka，然后添加一个路径，路径就是核显驱动的路径： /dev/dri 10、其实UNRAID安装Jellyfin，只需要设置下面2个地方即可，一个影片路径，一个核显路径，我们点击应用即可： 11、稍等几分钟，就安装完成了，可以愉快的玩耍了！ 12、点击到DOCKER选项，点击jellyfin这个图标，然后点击WEB UI，就进入到了Jellyfin设置页面了： 或者直接在浏览器输入 IP地址+端口 :8096 ，也可以访问： 这个步骤看着繁琐一点点，其实就是添加了一下集成显卡，并且加载到开机启动项了。 以后就不用再设置集显卡了。 本次步骤耗时1分钟，总计时1分20秒！ 设置 Jellyfin 硬件加速 直接在浏览器输入 IP地址+端口 :8096 ，也可以访问Jellyfin页面！ 1、之前写过Jellyfin的文章，里面也有设置过程，这里为了方便新老用户不用再去翻文章，所以再写一下，设置语言为中文： 2、设置管理员账号和密码： 3、直接点击Next： 4、设置语言：中华人民共和国，然后点击NEXT： 5、点击Next，完成： 6、输入账号密码进入到Jellyfin后台： 7、点击播放按钮： 8、将硬件加速选择： Video Acceleration API，下面的路径和勾勾会自动打开，这样就好了： 恭喜您，现在已经成功开启了Jellyfin的硬件加速了，以后CPU不会再彪高了： 9、会有一个提示，点击知道了即可： 本次耗时30秒，总计时1分50秒！ 设置 Jellyfin 媒体库 1、接下来，我们在电脑上访问UNRAID，地址栏 输入 ip地址，即可访问： 访问不会的，可以看我上篇入门文章。。希望学习UNRAID的朋友，一步一步来，别跳着看，不然出问题，又纠结了。 2、找到Movie，我们创建的放电影的文件夹，点进去后，新建自己的电影目录。 以后我们要下载，也可以把这个文件夹，设置为下载路径，以后直接把影片下载进去，然后刷新一下媒体库，就更新了影片了： 3、回到Jellyfin后台，点击媒体库，点添加： 4、参考我下面的设置，文件夹的路径记住是：/movies/电影 如果用了tmm刮削电影的元数据，就不需要打勾，如果没看过tmm设置，就打勾吧，然后点击确定即可： 5、tmm手动刮削影片封面软件文章，解决封面刮削失败的问题： 手把手教您用tMM刮削影片信息，让KODI、Jellyfin、PLEX、使用本地媒体电影墙！大家好！俺又来了！上篇文章为大家简单演示了下KODI如何安装和配置及使用！本人只需要2分钟即可安装和配置KODI，愉快的观看和管理家里的电影媒体库。本文用最简洁，也是最完整详细的方式，教给大家3分钟用tMM刮削自己的影片信息。上篇关于KODI的文章链接：文章里有不少值友反馈，KODI刮削有问题，匹配阿文菌|赞1k评论890收藏13k查看详情 6、电视剧的添加方式也差不多，不一会，在主页，就出现下面这样了，我们可以点击观看电影了： 7、比如我下面这个4K电影，现在开启了硬件加速也可以转码播放，而以前都没法播放： 8、看了下，4K的电影，播放的时候，CPU占用几乎忽略不计！非常给力： 9、电影随便看，就算用流量，在外网访问，也没有任何问题的： 为什么这么需要转码，其实自己的电影库，可以分享给家人朋友们，有了转码功能以后，可以解决网速不好的时候，还是可以播放电影的问题。 家里的上传带宽只有那么多，电影有的文件那么大，外网播放的话，有转码，就毫无压力了，我已经在外网追了几个剧了，那些用不上的朋友，只能说遗憾！ 本次耗时30秒，总计时2分20秒！ 安装 Jellyfin 字幕插件 1、有些影片是没有字幕的，我们设置一下，点击Jellyfin后台，目录，找到 open subitles插件，安装一下： 2、点击安装： 3、安装后，需要重启一下Jellyfin： 4、回到UNRAID页面，点击图标，Restart： 5、进入Jellyfin后台，设置一下插件： 6、注入账号密码，如果没有，注册一下即可： 7、注册页面，很容易： 8、输入完成后，回到自己的媒体库，点击管理媒体库： 9、在最下面，多了个字幕下载选项，将中文打勾： 只有完美匹配的影片才会下字幕的，有时候也会不准，最好扫描一下媒体库： 10、到此，在UNRAID下，安装和配置Jellyfin的教程就完成了，以下是我做的暴力测试，这么多人同时访问我家里的电影库，依旧CPU足够，非常的给力： 本次耗时30秒，总计时2分50秒！ 关于UNRAID系列的教程，参考了 B站UP主：司波图 和 VedioTalk 分享的UNRAID文章。 还参考了 人生观RSG 大佬的UNRAID图文教程。 欢迎访问他们的频道进行观看：《司波图》、《VedioTalk》、《 人生观RSG》 感谢各位大佬的精彩分享，希望后续能有更多丰富的内容！ 安装完成 UNRAID 开启集显驱动的这个方法不仅只适合Jellyfin！EMBY、PLEX同样也合适！ ","link":"https://amiao.ioxoo.top/post/unraid-jiao-cheng-3-fen-zhong-yong-an-zhuang-jellyfin-kai-qi-ying-jian-jia-su-zhuan-ma-jie-ma-4k-da-zao-zui-qiang-jia-ting-ying-yuan/"},{"title":"AdGuardHome 安装及部署教程","content":"AdGuardHome 安装及部署教程 AdGuardHome是什么 AdGuardHome 是一款全网广告拦截与反跟踪软件。它是一个开源的 DNS 服务器，部署方便、UI 友好易用，有着防污染、防跟踪、防篡改的能力，其次才是它的去广告、反跟踪功能，是通过重定向 DNS 解析记录实现的。 官网地址 项目GitHub地址 项目Docker地址 AdGuard Home 去广告效果怎样？ 既然有去广告功能，自然还是要讨论它的去广告效果的。不过在这里博主要给小伙伴们直接泼一盆冷水了，广告的种类和形态是多样的，不要指望一个 DNS 能把所有的广告消灭干净了。 对于 PC 端的网页广告效果最好的有且仅有浏览器插件，如果配合 Ad­Guard Home 在广告到达浏览器之前进行阻挡一些会给设备节省不少的计算开销，理论上来说会起到一定的省电效果，但估计也没人会在意。如果只是单纯的使用 Ad­Guard Home 并没有什么效果，少量的被拦截的广告会在页面上留下一个空白区域。 对于手机上的广告最直观的感受是手机收到的推送广告明显减少了，然后是部分 App 的开屏广告消失了，还是能起到一定作用的。对于 ADUI 这样的广告级魔改安卓系统效果尤其明显 AdGuard Home安装教程 1、开放端口 `53`：DNS 端口。即其他设备访问 AdGuard Home 进行 DNS 解析的默认端口。因为部分系统不支持自定义 DNS 端口，所以不建议自定义。部署前务必要查看是否有其它程序占用。 `67, 68`： DHCP 端口。除非想代替你路由上的 DHCP 服务器，否则用不到。 `80`: 管理页面默认 HTTP 端口。可忽略，在初始化页面设置管理端口为 `3000` 端口即可。 `443`：HTTPS 和 DoH 端口。本地内网环境不需要。 `853`：DoT 端口。不使用相关功能可忽略。 `3000`：初始化设置端口。除非通过配置文件去设置，否则必须开启。 2、自动安装（Linux和Mac） 在终端中运行以下命令： curl -sSL https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh 如果提示 curl: command not found ，那是因为没装 Curl ubuntu/debian 系统安装 Curl 方法: apt-get install curl -y centos 系统安装 Curl 方法: yum install curl -y 3、手动安装（Linux x64） 在终端中运行以下命令： wget https://static.adguard.com/adguardhome/release/AdGuardHome_linux_amd64.tar.gz tar xvf AdGuardHome_linux_amd64.tar.gz 进入解压目录执行以下命令安装 cd AdGuardHome ./AdGuardHome -s install 4、Windows安装 前往 AdGuard Home 官网下载安装包。 下载二进制文件 使用浏览器 / 下载工具下载：https://static.adguard.com/adguardhome/edge/AdGuardHome_windows_amd64.zip 解压压缩包得到 ​AdGuardHome.exe​ 文件 将 AdGuardHome.exe 移动到 C:\\Program Files\\AdGuard_Home 文件夹中 以管理员身份打开命令提示符，执行以下命令 cd &quot;C:\\Program Files\\AdGuard_Home&quot; .\\AdGuardHome.exe --service install 当提示 AdGuard Home is successfully installed and will automatically start on boot. 即表示 AdGuard Home 在当前系统上安装成功。在命令行中会显示管理后台的地址与端口，默认为 ​http://IP:3000​ 5、Docker安装（Linux x64） (1)Bridge 网络模式 docker run -d \\ --name adguardhome \\ -v $PWD/adguardhome/work:/opt/adguardhome/work \\ -v $PWD/adguardhome/conf:/opt/adguardhome/conf \\ -p 53:53/tcp \\ -p 53:53/udp \\ -p 3000:3000/tcp \\ adguard/adguardhome (2)Host 网络模式 Host 网络模式直接使用宿主机的网络，没有网络隔离，不需要考虑容器端口的映射，在容器启动后可以自由调整被占用的端口。适合在本机使用 (lo­cal­host)，或者直通外网的设备对外开放服务，就比如 VPS 、主路由。 docker run -d \\ --name adguardhome \\ --restart unless-stopped \\ --log-opt max-size=1m \\ --network host \\ -v $PWD/adguardhome/work:/opt/adguardhome/work \\ -v $PWD/adguardhome/conf:/opt/adguardhome/conf \\ adguard/adguardhome AdGuard Home设置教程 1、初始化设置 使用网页浏览器访问 IP + 3000 端口即可进入到 Ad­Guard Home 的初始化界面，比如 IP 是 10.0.0.53，那么就访问 http://10.0.0.53:3000 接着是监听接口（网卡）和端口设置，根据不同的网络模式和实际情况需要作出不同的修改 然后是设置管理用户名和密码，后面都是直接下一步： 完事之后输入用户名和密码登录，就来到了仪表盘页面。 至此 Ad­Guard Home 就部署完成了。 2、高级配置 （1）常规设置 过滤器更新间隔：DNS 过滤清单默认更新间隔，一般为 3 天 - 7 天 使用 AdGuard 「浏览安全」网页服务：作用与 Chrome 网页安全性检查类似，开启后，当用户访问存在潜在威胁的网站时，AdGuard 会主动拦截并弹出提示 使用 AdGuard 「家长控制」 服务：如果家中有尚未成年的孩子，建议开启，避免访问不良网站 强制安全搜索：隐藏 Bing、Google、Yandex、YouTube 网站上 NSFW 等不适宜的内容 查询记录保留时间：AdGuard Home 服务端采用 Sqlite 文件数据库存储日志，长时间保留可能会降低运行速度，同时占用大量的储存空间，家庭用户一般保留 24 小时 - 7 天即可 统计数据保留时间：用于仪表盘的数据展示，一般保留 24 小时 - 7 天即可 (2)DNS 设置 上游 DNS 服务器：AdGuard Home 的上游 DNS 服务器，可参考下方推荐列表，一般保留 1 - 2 个即可。AdGuard Home 除了可以作为广告过滤网关，如果设置了纯净 DNS 后，还可以避免运营商的 DNS 劫持 tls://dot.360.cn https://doh.360.cn/dns-query tls://dns.pub https://dns.pub/dns-query tls://dns.alidns.com https://dns.alidns.com/dns-query tls://dns.ipv6dns.com https://dns.ipv6dns.com/dns-query BootStrap DNS 服务器地址：作为 DoH / DoT DNS 的前置 DNS 解析器，可参考下方推荐列表 119.29.29.29 223.5.5.5 180.76.76.76 2400:1 2400:6666 240C::6666 查询方式、速度限制、EDNS、DNSSEC、拦截模式、DNS 缓存设置、访问设置可根据需要进行调整，一般保持默认设置即可 速度限制：0 使用 EDNS ：已知前面提及的上游 DNS 服务器都是支持 EDNS 技术的，它有助于获取到更合适的 CDN 节点，建议勾选。 使用 DNSSEC : 用于效验 DNS 记录的签名，防止 DNS 缓存被投毒，建议勾选。勾选后会在日志页面请求列显示小绿锁图标。 禁用 IPv6 ：丢弃 IPv6 的 DNS 查询。在本地网络和网站都支持 IPv6 会优先使用 IPv6 去访问网站，但目前 IPv6 的建设还处于初级阶段，大多数地区的 IPv6 网络体验都一般。还有一些代理软件对 IPv6 支持不佳，开启后可能会影响国际互联网的访问。如果对此没有特殊需求，那么直勾选即可，这样既不影响 BT 软件连接 IPv6 网络，又可以优先使用 IPv4 来上网。如果只有 IPv4 ，那么是否勾选没有区别 DNS 缓存配置，目前多数域名的 TTL 值普遍在 300 以内，所以给出以下设置参考值：覆盖最小 TTL 值：600；覆盖最大 TTL 值：3600 (3) DNS 封锁清单 为了更好地发挥 AdGuard Home 去广告的功能，仅依靠默认的过滤规则是不够的，但也不宜过多，过多的过滤规则会影响解析的速度，各位可以根据需要添加过滤规则。 halflife https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad.txt anti-AD https://anti-ad.net/easylist.txt neoHosts https://cdn.jsdelivr.net/gh/neoFelhz/neohosts@gh-pages/full/hosts.txt 大圣净化 - 针对国内视频网站 https://raw.githubusercontent.com/jdlingyu/ad-wars/master/hosts adgk手机去广告规则 https://raw.githubusercontent.com/banbendalao/ADgk/master/ADgk.txt 广告终结者 http://sub.adtchrome.com/adt-chinalist-easylist.txt Adbyby https://raw.githubusercontent.com/adbyby/xwhyc-rules/master/lazy.txt EasyList China+EasyList https://easylist-downloads.adblockplus.org/easylistchina+easylist.txt EasyPrivacy https://easylist-downloads.adblockplus.org/easyprivacy.txt (4) DNS允许清单 anti-ad白名单 https://raw.githubusercontent.com/privacy-protection-tools/dead-horse/master/anti-ad-white-list.txt filter_whitelist https://raw.githubusercontent.com/hl2guide/Filterlist-for-AdGuard/master/filter_whitelist.txt LWJ's white list https://raw.githubusercontent.com/liwenjie119/adg-rules/master/white.txt DNS允许白名单 https://raw.githubusercontent.com/ChengJi-e/AFDNS/master/QD.txt AdGuard Home 所有的配置参数都保存在一个名为 AdGuardHome.yaml 的配置文件中，这个配置文件默认路径通常为 AdGuard Home 二进制文件 AdGuardHome 所在的目录。 这里我们只需调整以下两个参数，就是可以明显提升 AdGuard Home 的 QPS 能力。 ratelimit : DDoS保护，客户端每秒接收的数据包数。默认值是 20，建议禁用该参数（将值改为 0）。 blocked_response_ttl : 缓存时间，默认值是 10，建议设置为 60 。 （5）开启DoH/DoT 设置一个DNS的解析域名并申请SSL证书，进入加密设置，勾选启用加密，输入自己刚刚设置好的域名，HTTPS端口填写没有被占用的端口，粘贴好SSL证书和秘钥后保存配置即大功告成，宝塔面板反代http://ip:8080并开启SSL。 在设备上使用 AdGuard Home DNS 最后你可以在 Ad­Guard Home 的设置指导页面找到相应系统的 DNS 设置方法，先不要着急在路由器上使用，建议先设置电脑或手机，通过访问一些网站来测试是否能正常解析。正常的情况下在仪表盘界面会有统计信息，在查询日志界面你会看到解析的详细记录信息。 完成 AdGuard Home 的设置后，便可将 AdGuard Home 的 DNS 地址部署到局域网设备上。 1、更改路由器 DNS 地址 不同品牌路由器修改的方法各有差异，具体步骤可参照说明书或网上的教程（路由器型号 + 更改 DNS），下方以 Redmi AC2100 路由器为例。 打开并登录路由器的后台管理页面。 在局域网设置中找到 DNS 设置，将首选 DNS 服务器更改为 AdGuard Home 的 DNS 地址，可设置为其它的 DNS 服务商，避免因 AdGuard Home 服务器宕机而导致局域网无法访问互联网。更改完成后点击保存即可。在路由器更改 DNS 后，局域网内的所有设备的 DNS 解析都会通过 AdGuard Home DNS 完成，实现过滤广告与反隐私跟踪。 2、更改手机 DNS 地址 进入「设定 - 网络和互联网 - Wi-Fi」，点击当前已连接网络的一旁的设置按钮，在 Wi-Fi 详情信息页面点击「编辑」按钮 找到「IP 设定」 分别输入该设备的 IP、网关与 AdGuard Home 服务器地址 3、 iOS 设备 进入「设置 - 无线局域网」，点击当前已连接网络的名称 在 Wi-Fi 详情信息页面找到「配置 DNS」 切换为手动设置，并输入 AdGuard Home 服务器地址 4、更改电脑 DNS 地址 打开「Windows 设置 - 网络和 Internet」，点击「更改适配器选项」 选中有线 / 无线网卡，点击工具栏「更改此连接的设置」 找到「Internet 协议版本 4」，点击「属性」按钮 填写 DNS 服务器，点击「编辑」按钮 常见问题 1、端口冲突 在 Linux 设备上运行 AdGuard Home，通常会出现 53（本地 DNS 服务器）、68（DHCP 客户端）、80（Http）、443（Https） 端口冲突的问题，可以通过netstat -tunlp | grep端口号 查询占用进程。有两种解决方案：使用不同端口、停用冲突进程。 如果是通过 Docker 方式运行 AdGuard Home，出现 ​listen udp 0.0.0.0 bind: address already in use​ 的提示，需要手动处理，方法如下： #停止 DNSStubListener systemctl stop systemd-resolved #创建文件夹（如果不存在） mkdir /etc/systemd/resolved.conf.d/ #使用 Nano 创建配置文件2021-04-29 16:16:00 星期四 nano /etc/systemd/resolved.conf.d/adguardhome.conf 在编辑器中粘贴以下内容： [Resolve] DNS=127.0.0.1 DNSStubListener=no 保存后执行以下命令。 #创建备份 sudo mv /etc/resolv.conf /etc/resolv.conf.backup #将 /etc/resolv.conf 链接至 /run/systemd/resolve/resolv.conf ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf #重启 DNSStubListener systemctl restart systemd-resolved 完成后使用 netstat -tunlp | grep 53 命令检查是否依旧有进程占用 53 端口，如无冲突，重启 AdGuard Home 容器即可。 2、平均处理时间过长？ 以下几个因素会使 AdGuard Home 的处理时间过长： 本地到上游DNS的速度：如果本地运营商的 DNS 没有 DNS 劫持、投毒的问题，建议使用运营商 DNS + 公共 DNS 的方案，DNS 速度可以通过 Ping 值比较。并在 AdGuard Home 中选择以「并行请求」的方式处理 DNS 请求 浏览安全、家庭控制与强制安全搜索服务：以上三个功能，在 DNS 请求时不会经过 DNS 缓存，直接向上游 DNS 服务器请求，从而减慢 AdGuard Home 的处理速度 IPv6：如果使用的宽带、校园网不支持 IPv6，可以禁用解析 IPv6，提高响应速度 过滤规则：过多的过滤规则会影响响应速度，宁缺毋滥，选择最合适自己的规则，一般保留 3 - 4 个广告过滤规则即可。 统计周期： 在完成以上优化后，发现平均处理时间并没有太大改变，使用体验上也并不慢，有可能是因为统计周期过长，将优化前的结果计入，导致优化前后的结果无太大差异。不妨将仪表盘的统计周期缩短为 24 小时再看看。 完成以上步骤后使用体验比没有使用 AdGuard Home 还要糟糕，问题有亿点严重了。这个时候需要查找 AdGuard Home 的日志，寻找问题的原因。 ","link":"https://amiao.ioxoo.top/post/adguardhome-an-zhuang-ji-bu-shu-jiao-cheng/"},{"title":"软路由中OpenWRT作为旁路由的安装设置教程","content":"玩转软路由 篇四：软路由中OpenWRT作为旁路由的安装设置教程 开篇说一些仁者见仁智者见智的话，先声明，这只是代表我自己近期浅陋的看法。看到很多人玩路由器，刷各种固件，什么爱快、高格、老毛子、OpenWRT什么的，自己也折腾过，也在恩山论坛里下载各路大神的固件使用。作为一个小白，就自然而然想到，这么多固件，哪个最好？当然对于这个问题，每个人的回答都不一样，毕竟适合自己的才重要。经过我自己不断在网上寻找答案，最后形成了一个成熟的看法，那就是真正的好不好，关键点在驱动，驱动做得会使得路由系统如虎添翼。但是，很多芯片厂家在卖芯片的时候是需要承诺不可进行二次开发的，所以路由器大厂华硕、网件是可以直接向芯片厂商比如高通、博通、MTK买成套的服务，那支持的效果肯定更好。而OpenWRT是开源社区，自然不会购买，所以我们刷在硬路由上的OpenWRT，只能靠破解出来的驱动或者阉割过的开源驱动，所以在效果上会明显跟不上。最后我得出结论，OpenWRT还是装在x86平台上，专注路由功能，WIFI部分还是交给硬路由。 所以，最后我个人感觉说的过去的方案就是工控机里安装主路由、旁路由。主路由负责拨号，旁路由负责外网。主路由和旁路由系统每个人根据自己的情况选择，我采用ROS作为主路由，OpenWRT作为旁路由的方案。之前介绍了ROS在Esxi下的安装（玩转软路由 篇三：虚拟机ESXI中Mikrotik RouterOS(ROS)的安装设置教程），那么下面介绍一下作为旁路由的OpenWRT安装，如果你准备用OpenWRT作为主路由，当然本篇的安装可以参考一下，上网设置就需要自己再摸索一下了。 一、OpenWRT的主要固件 基于Lean大神的源码编译的固件 Koolshare固件，koolshare也是根据Lean大神的源码编译的，不过提供的功能更多 原版OpenWRT，官方的固件，不需要自己编译，但是一些额外的功能比较少。 官方下载地址。 不想用koolshare的同学，可以考虑使用eSir编译的固件功能比较全。 二、OpenWRT固件格式转换 \\1. 如果你下载的固件，直接是两个“vmdk”文件，那么可以直接装到Esxi中去的，不需要转换，可以跳过此步骤。如下图所示： \\2. 如果你下载的固件是“img”格式的，那么需要“starwind-v2v-converter”这个软件把“img”转换成“vmdk”格式。下载地址，提取码：mdkx。 \\3. Starwind软件的使用。 第一步：安装并打开软件，选择“Local File”，如下图所示： 第二步：选择本地“img”格式的OpenWRT镜像，如下图所示： 第三步：选择转换文件放在何处，选择“Local file”，如下图所示： 第四步：选择生成的镜像格式，因为要在Esxi中安装，所以选择“VMDK”: 第五步：选择镜像属性，根据镜像应用需求选择“ESXi Server image”： 第六步：选择磁盘分配模式，这里选择“pre-allocated”： 第七步：点击“Convert”开始转换，转换成功后日志中有“successfully”字样。 三、Esxi下OpenWRT的安装 1. 创建虚拟机。 第一步：点击ESXI左侧导航栏中的【虚拟机】，然后在视图窗口点击【创建/注册虚拟机】，在弹出的窗口中点击【创建新虚拟机】。 第二步：选择名称和客户机操作系统。 “名称”自定义填写；“客户机操作系统系列”选择“Linux”；“客户机操作系统版本”选择“其他4.x或更高版本的Linux（64）位”。 第三步：选择存储空间。 如果只有一块硬盘，那就默认就可以，如果多个硬盘，请选择要安装的硬盘位置。 第四步：删除虚拟机默认硬件配置 这里只需要删除“CD/DVD驱动器”和“硬盘1”即可。 第五步：根据个人硬件情况修改CPU和内存。 一般作为旁路由1G内存就够用了，如果上外网的情况，可以把CPU多分配一点。配置完成后确认。 2. 配置OpenWRT虚拟机 第一步：点击ESXI左侧导航栏中的【存储】，然后在视图窗口点击【数据存储浏览器】，在弹出的窗口中选择刚刚创建的OpenWRT虚拟机目录，这个目录名字跟你OpenWRT虚拟机的名称一样，我这里是“OpenWRT”。选中虚拟机目录后，点击窗口左上方的【上载】，把你转换的或者下载的“vmdk”文件，上传到虚拟机目录下。请注意，镜像文件有两个“vmdk”文件，需要全部上传。但是上传完成后，Esxi窗口中只显示一个，不要担心。 第二步：点击ESXI左侧导航栏中的【虚拟机】，然后点击下面，然后在右侧视图窗口点击刚刚创建的虚拟机【OpenWRT】，然后点击【编辑】。 第三步：添加硬盘。在第二步点击【编辑】后，弹出对话框中，选择【添加硬盘】-&gt;【现有硬盘】，在弹出的对话框中，选择刚刚第一步中上传的镜像文件。 上图中【网络适配器1】这部分内容，有的人可能跟我的不一样，如果你有多个适配器一定要选择正确的适配器，要跟你的主路由的网络适配器一直才行。 第四步：修改引导选项，还是在上图中的窗口，进入【虚拟机选项】，往下找到【引导选项】，选择“BIOS”来引导虚拟机的固件。然后点击保存即可。 3. 修改OpenWRT虚拟机的IP 第一步：点击ESXI左侧导航栏中的【虚拟机】，然后在视图窗口点击刚刚创建并编辑好的虚拟机【OpenWRT】，然后点击左边的那个三角形播放按钮。 第二步：进入OpenWRT的命令行模式，等待OpenWRT加载完毕后按下回车，输入“vi /etc/config/netowork”这条命令进行IP地址的修改。 第三步：键入“i”进入编辑模式，然后找到“ipaddr”，把里面的IP修改为规划好的IP地址，我这里测试用的，暂时为“10.0.0.15”，需要跟你的主路由和Esxi在同一网段。编辑好之后，键下“Esc”键，退出编辑模式，然后键入“:wq”进行保存，注意“wq”前面有一个英文的冒号。 第四步：把本地连接（比如笔记本）的IP地址，跟上面设置的IP放到同一网段，然后在浏览器中输入OpenWRT设置的IP地址，就可以通过Web访问OpenWRT了。Lean大神的OpenWRT，默认账号“root”，默认密码是“password”。 四、旁路由OpenWRT的设置 先说明一下，这里OpenWRT是作为旁路由的，所以我是按照旁路由的设置在出教程，如果准备把OpenWRT作为主路由，那是另外的情况，需要配置的东西更多，以后有机会重新开一篇来讲。 1. OpenWRT接口设置 第一步：因为作为旁路由，其他的接口都不需要，删除即可。 第二步：修改仅剩的LAN接口 IPv4地址设置OpenWRT旁路由IP（需要与主路由ROS在同一个网段内）。IPv4网关设置为ROS主路由IP。IPv4广播留空即可。DNS使用公共DNS地址114.114.114.114、 119.29.29.29、223.5.5.5。 第三步：禁用旁路由的DHCP，因为这个OpenWRT只是作为旁路由，DHCP功能是由主路由ROS提供。 由上图所示，DHCP服务器里IPv6的相关服务也都禁用。到目前为止作为旁路由的OpenWRT就可以上网了。 2. OpenWRT防火墙设置 第一步：把“启用 SYN-flood 防御”选项取消。 第二步：删除与LAN口无关的规则，删除后如下图，并保存应用。 3. OpenWRT联网检测 通过上面的设置，OpenWRT作为旁路由，应该是可以上网了，最后可以再检查一下是否联网成功。 4. 其他服务设置 一般旁路由都是用来做一些特殊需求的，我编译的Lean大神的源码，已经把需要的加进来了，每个人的需求不一样，我除了这个特殊需求，其他用地不多，所以我自己编译的只是适合我自己需求的固件。如果你的需求更多，就自己编译或者网上找现成的固件吧。如果确实不介意东西很多而且闭源，那就直接koolshare编译的Lean大神源码固件吧。Lean大神只在GitHub上提供源码，没有现成的固件，所以要么自己编译，要么用其他人编译现成的。后面我会出一片编译Lean大神源码的教程，敬请关注哈哈。 五、主路由（ROS）设置 我的方案里面主路由是ROS，旁路由是OpenWRT，所以旁路由设置完，要稍微修改一下ROS里面的设置，Esxi的网络设置以及ROS的安装部署请参考我这篇文章《玩转软路由 篇三：虚拟机ESXI中Mikrotik RouterOS(ROS)的安装设置教程》。 1. 主路由（ROS）网关设置 使用WinBox登入ROS，点击左侧导航栏的【IP】，在弹出的菜单栏中点击【DHCP Server】菜单，在弹出的【DHCP Server】对话框中点击【Network】选项卡，然后双击之前建好的条目，弹出【DHCP Network】对话框，对“Gateway”进行修改，修改为旁路由的IP地址。 2. 主路由（ROS）DNS设置 使用WinBox登入ROS，点击左侧导航栏的【IP】，在弹出的菜单栏中点击【DNS】菜单，在弹出的【DNS Setting】对话框中，修改“Servers”的值，修改为旁路由的IP地址。 六、注意事项 主路由加旁路由模式，基本上就是互为网关，这个模式下，旁路由如果挂了，那么就上不了网了。也有旁路由挂了不影响上网的办法，这里暂时略过，以后有机会再讲。 主路由加旁路由模式，特别是我这里的ROS加OpenWRT模式，有人会说直接用OpenWRT多好啊，干嘛还要加个ROS呢，有些时候知道的话不方便讲出来，有些固件爆出过后门，有些固件还爆出过替人挖矿，这些事情也不知道真假。但是听过之后总归心里不舒服，所以这是我主路由选ROS的原因，纯属个人选择，大家别喷我。旁路由OpenWRT可以设置去广告，特殊需求等等效果，我个人也不是极客玩家，特殊需求只是偶尔为之，去广告也属于可有可无的功能，想折腾的就换固件。 ","link":"https://amiao.ioxoo.top/post/ruan-lu-you-zhong-openwrt-zuo-wei-pang-lu-you-de-an-zhuang-she-zhi-jiao-cheng/"},{"title":"黑群晖DSM7.0更换引导&数据迁移","content":"黑群晖DSM7.0更换引导&amp;数据迁 **创作立场声明：**黑群晖引导已经发布了一段时间，虚拟机里测试下来感觉已经可以正式投入使用了，故将本人正在使用的黑群6.2.3升级到DSM7.0。（NAS有价，数据无价。不喜折腾人士切勿尝试！！！） 追加修改(2021-10-07 17:37:54): 2021/10/7 目前通过redpill-tool-chainv0.10.4版生成的引导已经可以支持Esxi环境下完美升级到DSM7.0.1，自动识别引导分区，不再需要使用mknod命令映射synoboot分区。 针对直通SATA控制器的方案中，仍然需要将SATA控制器进行映射（DiskIdxMap=XX SataPortMap=Y），以确保所有硬盘都被正确识别。 附加7.0.1正式版（42218）引导链接：https://pan.baidu.com/s/1QS7iJ8NC7eqfmtJTgS0PGg 提取码: 3qdb 黑群晖引导已经发布了一段时间，虚拟机里测试下来感觉已经可以正式投入使用了，故将本人正在使用的黑群6.2.3升级到DSM7.0。（NAS有价，数据无价。不喜折腾人士切勿尝试！！！） https://post.smzdm.com/p/aoxg2vdn/) 镜像转换 本人使用Esxi搭建黑群晖环境，需要将引导镜像转换成VMDK文件，工具使用StarWindConverter，步骤如下： 选择引导镜像 选择转换格式 选择保存位置 完成转换 生成的文件 生成2个文件，都要传到Esxi的存储中，上传完成后只显示一个。 上传引导镜像到存储中 虚机建立 创建虚机 选择系统 使用BIOS引导故选择3.X Linux，UEFI未测试。 添加引导文件 删除多余的光驱、SCSI控制器，添加之前上传的引导文件，挂载在SATA控制器(0:0)。 修改网卡类型 必须使用E1000e类型，否则启动后找不到IP。 强制下次启动进入BIOS 为了防止启动速度过快，来不及选择Grub选项，勾选这里，单身30年请随意。 确认信息 添加直通设备 有直通SATA控制器的可以修改虚机配置，添加对应的PCI设备，具体板载SATA控制器直通的方法请见：https://wp.gxnas.com/8185.html 添加SATA控制器 添加SATA控制器，我这里有2个。添加完成后保存退出。完成上面那些步骤后就可以开机了。 开机 确认引导盘位置 加电后进入BIOS，确认引导盘为第一引导项，F10保存退出。 确认修改参数 确认图中红线部分被正确修改。 洗白部分： mac1：修改为mac地址 sn：序列号 SATA盘编号相关： DiskIdxMap：每个控制器上挂载盘位的起始编号 SataPortMap：控制器及每个控制器挂载的数量 具体参见https://isrey.com/archives/129/ 加载引导 Ctrl+X开始引导。（注意在开机过程中修改Grub只能临时修改，如需永久修改，需要挂载后修改） 初始化流程 初始化 通过synology assistant找到NASip，进入web界面进行初始化。 选择保留系统配置 DSM7.0认出盘内6.2.3的系统，选择保留配置进行安装。 上传pat 上传DS918+对应的PAT文件，请到官网下载未经修改过的镜像。 第一次安装失败 Esxi引导第一次安装必定失败，此时后台已经开启telnet。 telnet 使用终端软件telnetNAS，用户名：root 密码：空 找到引导盘的编号 通过fdisk -l 确认引导盘的编号，可以通过磁盘大小确认引导盘编号，我这里是sde。 查找引导盘位置 通过cat /proc/partitions 找到sde的major与minor。有4个，只需要前3个，我这里对应64-67。 mknod 使用mknod创建块文件： mknod /dev/synoboot b 8 64 mknod /dev/synoboot1 b 8 65 mknod /dev/synoboot2 b 8 66 创建块文件 之后点击确定，重新上传PAT进行安装。 再次上传镜像 这次突破55%就说明成功了，很快，就能看到NAS自动重启。 重启了 系统数据库更新 漫长的等待。。。。。。。 登录DSM 登陆界面 数据都保留了 漫长的等待后，所有数据迁移成功，可以看到登录界面了，所有之前的数据都保留下来了。 升级成功 总结 系统禁用了不支持的套件，需要进入修复，目前感觉redpill-tool-chainv0.6版本编译出来的版本已经很稳定了，目前只发现synology photos中人脸识别不能使用，可能与我只做了半洗白有关。 最后提醒一下大家： 数据无价，升级/迁移之前备份数据！！！！！！！ 数据无价，升级/迁移之前备份数据！！！！！！！ 数据无价，升级/迁移之前备份数据！！！！！！！ ","link":"https://amiao.ioxoo.top/post/hei-qun-hui-dsm70-geng-huan-yin-dao-andshu-ju-qian-yi/"},{"title":"Debian软件包常用管理命令整理","content":"Debian软件包常用管理命令整理 在Debian及其衍生的系统中，我们需要经常使用的软件包管理命令，对系统进行管理，以便系统达到预期的状态。Debian系统中，常用的软件包命令有 apt、apt-get、dpkg、apt-cache等，这里我们着重列举常见的一些用法。 软件包查询（不需要sudo权限） $ apt-cache search pkg_keyword #列出匹配关键字的软件包 $ apt search pkg_keyword #列出匹配关键字的软件包，包括了版本信息 $ apt list pkgname #查找该软件包，会显示版本信息 $ apt-cache show pkgname #查询软件包详细信息 $ apt show pkgname #查询软件包详细信息 $ apt-cache depends pkgname #查询软件包依赖关系 $ apt-cache rdepends pkgname #查询被哪些软件包依赖 $ apt-cache showpkg pkgname #同上 $ apt-cache policy pkgname #查询软件包的安装状态和版本 $ apt-cache stats #查看软件库的统计信息 软件包安装 $ sudo apt-get install pkgname $ sudo apt install pkgname $ sudo apt install -f #自动修复依赖 $ sudo apt-get install -f 在安装软件包之前，我们一般会执行 apt-get update，更新 apt-get 缓存中的软件包信息，获取最新软件包列表。软件的安装源，是由 /etc/apt/sources.list 和 /etc/apt/sources.list.d/ 目录下的 .list 文件定义的。 $ sudo apt-get upgrade #更新系统所有已安装软件包，只更新包会忽略依赖关系 $ sudo apt upgrade $ sudo apt-get upgrade -u #-u 列出可升级软件列表 $ sudo apt-get upgrade -s #模拟升级 $ sudo apt-get dist-upgrade #根据依赖关系更新系统所有已安装软件包 $ sudo apt-get --reinstall install pkgname #只升级指定的软件包 $ sudo apt-get source pkgname #只下载源码包 $ sudo apt-get check #检查破损的依赖关系 $ sudo apt-get autoclean #自动清楚apt-get缓存 软件包卸载 $ sudo apt-get remove pkgname #删除已安装的软件包（保留配置文件） $ sudo apt-get purge pkgname #卸载软件，同时删除配置文件 $ sudo apt-get autoremove pkgname #彻底自动卸载软件，删除该软件包及所依赖的，以及不再使用和未使用的软件包 在清理本地缓存时，我们会用到 apt 的 clean 命令。值得一提的是，apt-get autoclean 和 apt-get clean 是略微有区别的。 APT的底层包管理器是dpkg, dpkg 安装软件包时, 会将 *.deb 放在 /var/cache/apt/archives 中。apt-get autoclean 只会删除 /var/cache/apt/archives 已经过期的deb。使用 apt-get clean 会将 /var/cache/apt/archives 的 所有 deb 删掉。 dpkg工具管理deb格式软件包 $ dpkg -l #列出所有安装的deb软件包 $ dpkg -l|grep nginx #查询nginx是否已安装 $ dpkg -s zip #查看软件包zip的状态和详细信息 $ dpkg -S openssh-server #查看软件包openssh-server包含的所有文件 $ dpkg -S /path/to/file #查看某文件对应的软件包名 $ sudo dpkg -i pkgname.deb #安装.deb软件包，需要自己解决依赖关系 $ sudo dpkg -r pkgname #卸载deb格式的软件包（保留配置文件），需要自己解决依赖关系 $ sudo dpkg -P pkgname #卸载deb格式的软件包（不保留配置文件），需要自己解决依赖关系 $ sudo dpkg -P package-name #清除软件包的所有文件（removes everything, including conffiles） 使用PPA源安装软件包 所有的PPA都寄存在launchpad.net网站上，该网站由Canonical公司架设。 ppa:user/ppa-name #ppa源语法格式 sudo add-apt-repository ppa:user/ppa-name #添加ppa源 sudo add-apt-repository -r ppa:user/ppa-name #删除ppa源 注意，任何人都可以上传软件包到ppa，所有尽量避免使用ppa，如果必须使用，应选用可以信任的，有固定团队维护的ppa。 ","link":"https://amiao.ioxoo.top/post/debian-ruan-jian-bao-chang-yong-guan-li-ming-ling-zheng-li/"},{"title":"Unraid 借助 rclone 备份数据到 阿里云盘","content":"Unraid 借助 rclone 备份数据到 阿里云盘 阿里云盘 前言 nas 虽好, 但总有硬盘损毁的时候, 所以备份数据是个好习惯, 阿里云盘容量大还不限速, 所以是个不错的选择, 但官方可没提供这样的功能, 所以我们要借助 webdav-aliyundriver 这个项目为 阿里云盘 开启 webdav, 再用 rclone 来同步本地要备份的数据到 阿里云盘上 准备工作 先为 阿里云盘 开启 webdav 协议, 可以到这里找到 开启阿里云盘的 Web DAV 支持, 设置本地挂载把不限速的 阿里云盘 挂载到电脑上当本地硬盘使用坑了个飞坑飞 下载插件 登录 unraid 的管理界面, 点击 应用 -&gt; 搜索 rclone -&gt; 安装插件 再下载 User Scripts 插件 配置 rclone 打开unraid 的控制台, 输入 rclone config 测试配置是否正常 输入 rclone ls remote: 列出 WebDAV 中的所有文件 同步文件 我这里用 appdata 目录来做演示 rclone sync /mnt/user/appdata Alibaba-webdev:unraid_appdata/ rclone sync -- 同步命令 /mnt/user/appdata -- 要同步的本地目录 Alibaba-webdev:unraid_appdata/ -- 上传到 Alibaba-webdev 服务的 unraid_appdata 目录下 定时执行同步 点击 设置 -&gt; User Scripts 附: rclone 常用命令 复制rclone config - 以控制会话的形式添加rclone的配置，配置保存在.rclone.conf文件中。 rclone copy - 将文件从源复制到目的地址，跳过已复制完成的。 rclone sync - 将源数据同步到目的地址，只更新目的地址的数据。 rclone move - 将源数据移动到目的地址。 rclone delete - 删除指定路径下的文件内容。 rclone purge - 清空指定路径下所有文件数据。 rclone mkdir - 创建一个新目录。 rclone rmdir - 删除空目录。 rclone check - 检查源和目的地址数据是否匹配。 rclone ls - 列出指定路径下所有的文件以及文件大小和路径。 rclone lsd - 列出指定路径下所有的目录/容器/桶。 rclone lsl - 列出指定路径下所有文件以及修改时间、文件大小和路径。 rclone md5sum - 为指定路径下的所有文件产生一个md5sum文件。 rclone sha1sum - 为指定路径下的所有文件产生一个sha1sum文件。 rclone size - 获取指定路径下，文件内容的总大小。. rclone version - 查看当前版本。 rclone cleanup - 清空remote。 rclone dedupe - 交互式查找重复文件，进行删除/重命名操作。 ","link":"https://amiao.ioxoo.top/post/unraid-jie-zhu-rclone-bei-fen-shu-ju-dao-a-li-yun-pan/"},{"title":"宝塔 7.6.0版本 [推荐/稳定版本] 开心版","content":"宝塔 7.6.0版本 [推荐/稳定版本] Centos全新安装命令：根据系统执行框内命令开始安装（大约2分钟完成面板安装）升级后可能需要重启面板 yum install -y wget &amp;&amp; wget -O install.sh http://v7.hostcli.com/install/install_6.0.sh &amp;&amp; sh install.sh Ubuntu/Deepin全新安装命令： wget -O install.sh http://v7.hostcli.com/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh Debian全新安装命令： wget -O install.sh http://v7.hostcli.com/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh Fedora全新安装命令:： wget -O install.sh http://v7.hostcli.com/install/install_6.0.sh &amp;&amp; bash install.sh 已经安装官方面板，执行下列命令升级到7.6.0纯净版： curl http://v7.hostcli.com/install/update6.sh|bash 其他非官方版本(含开心版、快乐版、纯净版等 7.4.5至7.6.0版本之间所有版本均可) ，执行下列命令升级到7.6.0纯净版： curl http://v7.hostcli.com/install/update6.sh|bash 任意非官方版本还原到官方最新版 curl http://download.bt.cn/install/update6.sh|bash ","link":"https://amiao.ioxoo.top/post/bao-ta-760-ban-ben-tui-jian-wen-ding-ban-ben-kai-xin-ban/"},{"title":"Aria2 + Rclone 实现 OneDrive、Google Drive 等网盘离线下载","content":"前言 Aria2 有一个配置项 on-download-complete，即在下载完后执行一个脚本或命令。当下载完成后 Aria2 会给脚本传递分别为 GID 、文件数量、文件路径的 3 个变量。利用这个配置项和这些变量就可以实现诸如下载完成后调用 Rclone 进行上传的操作。整个过程简单来说就是，Aria2 下载文件到 VPS ，完成后告诉 Rclone 将文件上传到网盘。理论上只要是 Rclone 支持的网盘，都可以按照这个思路来实现伪离线下载。当然这篇教程并不是教你如何去写脚本，而是直接用博主已做好的一套方案，按照教程操作很容易就能实现。 准备工作 首先你需要一个适合下载的 VPS ，如果你还没有合适 VPS 推荐去看《便宜高性价比和白嫖 VPS 推荐》，这里精选了博主这些年来使用过的好用的 VPS ，大盘鸡最低只需十几块钱一个月。 安装 Aria2 这里使用 Aria2 一键安装管理脚本 增强版，执行下面的代码下载并运行脚本，出现脚本操作菜单输入 1 开始安装。 wget -N git.io/aria2.sh &amp;&amp; chmod +x aria2.sh &amp;&amp; ./aria2.sh 安装和配置 Rclone RCLONE 官方提供了一键安装脚本： curl https://rclone.org/install.sh | sudo bash 安装完后，输入 rclone config 命令进入交互式配置选项，按照提示一步一步来进行操作即可。如果你一脸懵逼，可以去看《Rclone 安装配置教程》来了解配置的详细过程。 配置自动上传脚本 Aria2 一键安装管理脚本 增强版 整合了 Aria2 完美配置 ，安装后会附带一些附加功能脚本功能脚本，RCLONE 自动上传脚本就是其中之一。由于默认不启用，所以需要手动启用。 TIPS: 本项目的上传脚本使用更稳定快速的原生命令上传方式，而非处在测试阶段的挂载方式，这点和一般的脚本不同。 输入nano /root/.aria2c/aria2.conf打开 Aria2 配置文件进行修改。或使用Aria2 一键安装管理脚本 增强版中的手动修改选项打开配置文件进行修改。找到“下载完成后执行的命令”，把clean.sh替换为upload.sh。 # 下载完成后执行的命令 on-download-complete=/root/.aria2c/upload.sh nano 编辑器的操作方法参见《Linux 下适合新手的文本编辑器 nano 使用教程》 输入nano /root/.aria2c/script.conf打开附加功能脚本配置文件进行修改，有中文注释，按照自己的实际情况进行修改，第一次使用只建议修改网盘名称。 # 网盘名称(RCLONE 配置时填写的 name) drive-name=OneDrive 重启 Aria2 。脚本选项重启或者执行以下命令： service aria2 restart 检查配置是否成功 执行upload.sh脚本，提示success即代上传脚本能正常被调用，否则请检查与 RCLONE 有关的配置。 /root/.aria2c/upload.sh 打开实时日志并下载任意文件，出现上传成功信息即代表配置成功，否则请认真阅读教程并重新开始。 检查网盘是否存在相关文件，若不存在说明你搞错网盘了。 使用方法 当进行完以上所有操作，现在下载文件就会自动上传至相应的网盘。 Aria2 是命令行后端软件，需要配合前端 GUI 才能有更好的使用体验，对于从来没有接触过的萌新，建议去看《Aria2 前端面板 AriaNg 使用教程》来了解相关基础知识。 遇到问题如何处理 请仔细阅读教程中的每一个字，严格按照教程来进行操作几乎不会遇到问题。 FAQ FAQ 记录了有关 Aria2 的常见问题与解决方案。 提问 加入 Aria2 TG 群和小伙伴们一起讨论。要注意提问的方式和提供有用的信息。提问请确认阅读过《提问的智慧》，这能更好的帮助你去解决问题和节约时间。诸如 “为什么不能使用？”、“那你能帮帮我吗？” 之类的问题应该没人会知道。另外不要把热心网友当做淘宝客服，没人会陪你打太极，帮你是缘分，不帮是本分。 ","link":"https://amiao.ioxoo.top/post/aria2-rclone-shi-xian-onedrivegoogle-drive-deng-wang-pan-chi-xian-xia-zai/"},{"title":"Home Assistant中显示最新油价信息","content":"配置过程 1.下载项目 链接：https://github.com/aalavender/OilPrice 2.文件配置 下载解压后，如果Home Assistant的系统文件中，config目录下没有custom_components这个文件夹，那就新建那么一个文件夹 将下载解压后的custom_components目录的oilprice文件夹及里面的文件，拷贝到Home Assistant系统custom_components目录下 3.configuration.yaml配置 使用nodepad++或其他工具打开configuration.yaml 在里面添加以下代码 - platform: oilprice name: 最新油价 region: jiangsu 如下图所示: 4.重启系统 检查配置-&gt;重启系统 重启后，在概要中，去编辑仪表盘 选择Markdown，选择【显示代码编辑器】 复制以下代码粘贴 type: markdown content: &gt; &lt;ha-icon icon=&quot;mdi:update&quot;&gt;&lt;/ha-icon&gt; {{ state_attr('sensor.zui_xin_you_jie', 'update_time')}} ## &lt;center&gt;92#&lt;ha-icon icon=&quot;mdi:gas-station&quot;&gt;&lt;/ha-icon&gt; &lt;font color=#ea4335&gt; {{ state_attr('sensor.zui_xin_you_jie', '92')}} &lt;/font&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;95# &lt;ha-icon icon=&quot;mdi:gas-station&quot;&gt;&lt;/ha-icon&gt; &lt;font color=#fbbc05&gt; {{ state_attr('sensor.zui_xin_you_jie', '95')}} &lt;/font&gt; &lt;p&gt; 98# &lt;ha-icon icon=&quot;mdi:gas-station&quot;&gt;&lt;/ha-icon&gt; &lt;font color=#4285f4&gt; {{ state_attr('sensor.zui_xin_you_jie', '98')}}&lt;/font&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0#柴油&lt;ha-icon icon=&quot;mdi:gas-station&quot;&gt;&lt;/ha-icon&gt; &lt;font color=#34a853&gt; {{ state_attr('sensor.zui_xin_you_jie', '0')}} &lt;/font&gt;&lt;/center&gt; - {{ states('sensor.zui_xin_you_jie') }} - {{ state_attr('sensor.zui_xin_you_jie', 'tips')}} 就能看到效果了！ ","link":"https://amiao.ioxoo.top/post/home-assistant-zhong-xian-shi-zui-xin-you-jie-xin-xi/"},{"title":"Windows Thin PC x86 正式版下载、安装、汉化 等","content":"Windows Thin PC x86 正式版下载、安装、汉化 等 Microsoft Windows Thin PC 介绍 下载 安装 激活 MAK 密钥激活 WES 证书激活 WES 证书永久激活 KMS 激活 中文语言包 其他 Microsoft Windows Thin PC 介绍 Microsoft Windows Thin PC 目前尚未在中国上市且未提供给中国客户，只有英文版。WinTPC 是一个面向企业用户的产品，主要面向虚拟桌面基础架构（VDI）消费者，相对于其他常规 Windows 7 系统，由于组件的精简，消耗系统资源更少，对于普通用户，如果您的电脑配置较低，对系统功能的要求也不高，WinTPC 将是一个很好的选择，下面分享 Windows 7 瘦身版 Windows Thin PC 下载、激活及完美汉化的方法。 下载 ed2k://|file|en_windows_thin_pc_x86_697681.iso|1576980480|2D0E6A048EB3F314F556B4F0834A95E2|/ 文件: en_windows_thin_pc_x86_697681.iso 大小: 1576980480 字节 发布日期 (UTC): 7/1/2011 6:19:55 AM MD5: 434DC27B6ECD4932D300A5E756397FF5 SHA1: CC181653C1BAAF85337CDA069E35D0D94F99CCA9 CRC32: B286DF82 90天试用版的链接就不列出来了。 安装 安装过程和 Windows 7 类似，比 Windows Embedded Standard 7（以下简称 WES7）简单。没有要求输入 KEY，激活宽限期 3 天，WES7 的 KEY 不能用。。 激活 以下的激活方法都不需要主板 BIOS 里带 SLIC 2.1 MAK 密钥激活 WES 证书激活 这个WES证书激活方法只是假激活，实际只是把使用期延长至30天，到期后依然是激活状 态，但桌面右下角以及开机都提示不是正版，而且黑屏。 下载证书文件： http://filemarkets.com/file/axhmei/993a1a10/ 注：证书文件提取自 WES7 同目录下的： Security-SPP-Component-SKU-Embedded-VLBA-ul.xrm-ms Security-SPP-Component-SKU-Embedded-VLBA-ul-oob.xrm-ms 将证书文件放到以下位置： C:\\Windows\\System32\\spp\\tokens\\skus\\Security-SPP-Component-SKU-Embedded 然后管理员权限运行 cmd 命令提示符，输入以下命令即可成功激活， slmgr.vbs -rilc WES 证书永久激活 和上面的方法类似，不过增加了一个证书文件以及更换序列号，管理员权限运行 cmd 命令 提示符，输入以下命令： slmgr.vbs /ilc pkeyconfig-embedded.xrm-ms slmgr.vbs /ilc Security-SPP-Component-SKU-Embedded-VLBA-ul.xrm-ms slmgr.vbs /ilc Security-SPP-Component-SKU-Embedded-VLBA-ul-oob.xrm-ms slmgr.vbs /ipk XGY72-BRBBT-FF8MH-2GG8H-W7KCW slmgr.vbs /xpr 证书文件下载地址：http://www.newsmth.net/bbscon.php?bid=99&amp;id=1851783 1234567 KMS 激活 中文语言包 使用 WES7 SP1 的中文语言包，下载： http://download.microsoft.com/download/8/6/1/8616D57C-1163-45FB-832A-15FA60571002/SP1/Chinese (Simplified) Language Pack - Windows Embedded Standard 7 SP1/lp.cab 文件: lp.cab 大小: 39548892 字节 MD5: 26083B8700C1444E95E88EF3FCA7C426 SHA1: C6B985F0B32FDFF8558190D21EE615BD9B3D70DF CRC32: 8B2147AA 因为没有 lpksetup.exe 组件，所以不能在控制面板里直接安装语言包，可以用 DISM 命令添加 WES7 SP1 的中文语言包，把下载的语言包文件放到 C 盘根目录，然后以管 理员权限运行 cmd 命令提示符，然后输入命令： dism /online /add-package /packagepath:C:\\lp.cab 重启后在控制面板中更改显示语言 修改启动画面的中文显示那两步可以忽略，因为不能完全显示中文，不如不改。 其他 虚拟机装了测试，不安装 VMware Tools 时，安装后占用硬盘空间 2.9G 以上，添加中 文包后系统占用磁盘空间 3.1G 以上。系统默认启动进程 33~36 个（比 WES7 定制出 来的少），内存 340M 左右吧。“控制面板-系统”里显示的系统版本是 WES，启动画 面是Windows Thin PC。 添加 winemb-lpk-setup.cab 组件后还不能管理语言包，缺少 MUI 不能启动。 用 dism 命令卸载系统原有组件失败，没办法卸载日文韩文输入法和字体。 ","link":"https://amiao.ioxoo.top/post/windows-thin-pc-x86-zheng-shi-ban-xia-zai-an-zhuang-han-hua-deng/"},{"title":"Rclone 进阶使用教程 - 常用命令参数详解","content":"前言 Rclone 是一个的命令行工具，支持在不同对象存储、网盘间同步、上传、下载数据。并且通过一些设置可以实现离线下载、服务器备份等非常实用的功能。本篇文章将讲解 Rclone 常用的一些命令参数。 安装 Rclone Linux/macOS/BSD 官方提供了一键安装脚本： curl https://rclone.org/install.sh | sudo bash Windows 直接下载 Rclone 设置 rclone config - 进入交互式配置选项，进行添加、删除、管理网盘等操作。详细操作参见：《Rclone 安装配置教程》 rclone config file` - 显示配置文件的路径，一般配置文件在 `~/.config/rclone/rclone.conf rclone config show - 显示配置文件信息 命令语法 # 本地到网盘 rclone [功能选项] &lt;本地路径&gt; &lt;网盘名称:路径&gt; [参数] [参数] ... # 网盘到本地 rclone [功能选项] &lt;网盘名称:路径&gt; &lt;本地路径&gt; [参数] [参数] ... # 网盘到网盘 rclone [功能选项] &lt;网盘名称:路径&gt; &lt;网盘名称:路径&gt; [参数] [参数] ... 用法示例 rclone move -v /Download Onedrive:/Download --transfers=1 常用功能选项 rclone copy - 复制 rclone move - 移动，如果要在移动后删除空源目录，请加上 --delete-empty-src-dirs 参数 rclone sync - 同步：将源目录同步到目标目录，只更改目标目录。 rclone size - 查看网盘文件占用大小。 rclone delete - 删除路径下的文件内容。 rclone purge - 删除路径及其所有文件内容。 rclone mkdir - 创建目录。 rclone rmdir - 删除目录。 rclone rmdirs - 删除指定灵境下的空目录。如果加上 --leave-root 参数，则不会删除根目录。 rclone check - 检查源和目的地址数据是否匹配。 rclone ls - 列出指定路径下的所有的文件以及文件大小和路径。 rclone lsl - 比上面多一个显示上传时间。 rclone lsd 列出指定路径下的目录 rclone lsf - 列出指定路径下的目录和文件 常用参数 -n = --dry-run - 测试运行，用来查看 rclone 在实际运行中会进行哪些操作。 -P = --progress - 显示实时传输进度，500mS 刷新一次，否则默认 1 分钟刷新一次。 --cache-chunk-size SizeSuffi - 块的大小，默认5M，理论上是越大上传速度越快，同时占用内存也越多。如果设置得太大，可能会导致进程中断。 --cache-chunk-total-size SizeSuffix - 块可以在本地磁盘上占用的总大小，默认10G。 --transfers=N - 并行文件数，默认为4。在比较小的内存的VPS上建议调小这个参数，比如128M的小鸡上使用建议设置为1。 --config string - 指定配置文件路径，string为配置文件路径。 --ignore-errors - 跳过错误。比如 OneDrive 在传了某些特殊文件后会提示Failed to copy: failed to open source object: malwareDetected: Malware detected，这会导致后续的传输任务被终止掉，此时就可以加上这个参数跳过错误。但需要注意 RCLONE 的退出状态码不会为0。 日志 rclone 有 4 个级别的日志记录，ERROR，NOTICE，INFO 和 DEBUG。默认情况下，rclone 将生成 ERROR 和 NOTICE 级别消息。 -q - rclone将仅生成 ERROR 消息。 -v - rclone将生成 ERROR，NOTICE 和 INFO 消息，推荐此项。 -vv - rclone 将生成 ERROR，NOTICE，INFO和 DEBUG 消息。 --log-level LEVEL - 标志控制日志级别。 输出日志到文件 使用 --log-file=FILE 选项，rclone 会将 Error，Info 和 Debug 消息以及标准错误重定向到 FILE，这里的 FILE 是你指定的日志文件路径。 另一种方法是使用系统的指向命令，比如： rclone sync -v Onedrive:/DRIVEX Gdrive:/DRIVEX &gt; &quot;~/DRIVEX.log&quot; 2&gt;&amp;1 文件过滤 --exclude - 排除文件或目录。 --include - 包含文件或目录。 --filter - 文件过滤规则，相当于上面两个选项的其它使用方式。包含规则以 + 开头，排除规则以 - 开头。 文件类型过滤 比如 --exclude &quot;*.bak&quot;、--filter &quot;- *.bak&quot;，排除所有 bak 文件。也可以写作。 比如 --include &quot;*.{png,jpg}&quot;、--filter &quot;+ *.{png,jpg}&quot;，包含所有 png 和 jpg 文件，排除其他文件。 --delete-excluded 删除排除的文件。需配合过滤参数使用，否则无效。 目录过滤 目录过滤需要在目录名称后面加上 /，否则会被当做文件进行匹配。以 / 开头只会匹配根目录（指定目录下），否则匹配所目录。这同样适用于文件。 --exclude &quot;.git/&quot; 排除所有目录下的.git 目录。 --exclude &quot;/.git/&quot; 只排除根目录下的.git 目录。 --exclude &quot;{Video,Software}/&quot; 排除所有目录下的 Video 和 Software 目录。 --exclude &quot;/{Video,Software}/&quot; 只排除根目录下的 Video 和 Software 目录。 --include &quot;/{Video,Software}/**&quot; 仅包含根目录下的 Video 和 Software 目录的所有内容。 文件大小过滤 默认大小单位为 kBytes ，但可以使用 k ，M 或 G 后缀。 --min-size 过滤小于指定大小的文件。比如 --min-size 50 表示不会传输小于 50k 的文件。 --max-size 过滤大于指定大小的文件。比如 --max-size 1G 表示不会传输大于 1G 的文件。 TIPS: 博主在实际使用中发现大小过滤两个选项不能同时使用。 过滤规则文件 --filter-from &lt;规则文件&gt; 从文件添加包含 / 排除规则。比如 --filter-from filter-file.txt。 过滤规则文件示例： - secret*.jpg + *.jpg + *.png + file2.avi - /dir/Trash/** + /dir/** - * 这里只举例比较常用和简单的一些过滤用法，更复杂和高端的用法可以查看官方文档。 环境变量 rclone 中的每个选项都可以通过环境变量设置。环境变量的名称可以通过长选项名称进行转换，删除 -- 前缀，更改 - 为_，大写并添加前缀 RCLONE_。环境变量的优先级会低于命令行选项，即通过命令行追加相应的选项时会覆盖环境变量设定的值。 比如设置最小上传大小 --min-size 50，使用环境变量是 RCLONE_MIN_SIZE=50。当环境变量设置后，在命令行中使用 --min-size 100，那么此时环境变量的值就会被覆盖。 常用环境变量 RCLONE_CONFIG - 自定义配置文件路径 RCLONE_CONFIG_PASS - 若 rclone 进行了加密设置，把此环境变量设置为密码，可自动解密配置文件。 RCLONE_RETRIES - 上传失败重试次数，默认 3 次 RCLONE_RETRIES_SLEEP - 上传失败重试等待时间，默认禁用，单位s、m、h分别代表秒、分钟、小时。 CLONE_TRANSFERS - 并行上传文件数。 RCLONE_CACHE_CHUNK_SIZE - 块的大小，默认5M，理论上是越大上传速度越快，同时占用内存也越多。如果设置得太大，可能会导致进程中断。 RCLONE_CACHE_CHUNK_TOTAL_SIZE - 块可以在本地磁盘上占用的总大小，默认10G。 RCLONE_IGNORE_ERRORS=true - 跳过错误。 参考资料 Rclone 官方文档 ","link":"https://amiao.ioxoo.top/post/rclone-jin-jie-shi-yong-jiao-cheng-chang-yong-ming-ling-can-shu-xiang-jie/"},{"title":"自建 speedtest 服务器 测速 群晖docker安装speedtest","content":"自建 speedtest 服务器 测速 群晖docker安装speedtest 比如测试手机wifi和路由器之间的速度。 打开网页就可以测试，不需要客户端。 测速服务建立在exsi下的黑裙，速度有损耗。 手机wifi：5G速率 1.2g 手机wifi：5G速率 866m 电脑:2.5g网卡 电脑:万兆网卡 电脑:千兆网卡 远程测速，可能位置问题，好慢，记得以前4G好快的 windows linux都有服务端， 但是docker安装最简单， 以群晖的为例: 打开docker 注册表搜索 speedtest 下载镜像 看网络情况，400多兆大小， 下载完成后， 启动，高级设置， 改下端口，随意，我填的60 比如我的：192.168.10.55:60 因为家人觉得数字不好记， 在路由器里绑定了几个好记的域名： ","link":"https://amiao.ioxoo.top/post/zi-jian-speedtest-fu-wu-qi-ce-su-qun-hui-docker-an-zhuang-speedtest/"},{"title":"homeassistant炫酷的天气雷达","content":"前言 之前看到别人的homeassistant的概览有一个非常帅气的天气雷达。百度一顿没有关于天气雷达的文章，都是和风天气的设置教程。但是和风天气的气象雷达api需要花钱，所以另辟蹊径，没想到在有油管上找到了，而且还是免费的！！！ 展示 可以分三十六个大类 部分大类里面可以分至少两个小类 搞起！！ 我们要前进入 windy ，然后点击左上角分享按钮 然后就会看到中间的分享链接在转圈不用管它，直接点下面的页面嵌入式挂件 然后就看到了这样的页面，左面紫色里面的内容可以自由设置 在右面的地图上拖动到需要显示的城市或地区，当然地图大小也是可以调的。 点击地图右上角的风，我们可以更改需要显示的天气有三十六种图层非常的全面 自定义好以后，点击左下角复制到剪切板 我们新建一个记事本，将剪切板内容粘贴在记事本里。找到src将src后引号内的内容复制 打开Homeassistant概览找到配置UI选择网页卡片将将网址粘贴到上面 https://embed.windy.com/embed2.html?lat=33.729&amp;lon=120.460&amp;detailLat=22.291&amp;detailLon=114.150&amp;width=650&amp;height=450&amp;zoom=8&amp;level=surface&amp;overlay=wind&amp;product=ecmwf&amp;menu=&amp;message=&amp;marker=&amp;calendar=now&amp;pressure=&amp;type=map&amp;location=coordinates&amp;detail=&amp;metricWind=default&amp;metricTemp=default&amp;radarRange=-1 保存即可 结束 这个天气雷达真的是爱了，免费又好看还能看实时和预报 希望有需要的兄弟能喜欢 ","link":"https://amiao.ioxoo.top/post/homeassistant-xuan-ku-de-tian-qi-lei-da/"},{"title":"DEBIAN 10切换ROOT用户登录","content":"DEBIAN 10允许ROOT用户登录 Debian 10默认的一样不能用root用户登录，还是需要设置，方法如下： 一，打开终端，用普通用户登录 输入：su - 输入密码，切换到root用户 二，设置root用户登录 nano /etc/ssh/sshd_config 三，修改配置 PermitRootLogin yes 上面这一句后面改为yes，表示允许root用户登录 PasswordAuthentication yes 这一句表示，允许用密码登录 然后保存即可 如果没有以上内容请直接复制粘贴进去保存 ","link":"https://amiao.ioxoo.top/post/debian-10-qie-huan-root-yong-hu-deng-lu/"},{"title":"debian常用指令","content":"debian常用指令 查看软件xxx安装内容 dpkg -L xxx 查找软件 apt-cache search 正则表达式 查找文件属于哪个包 dpkg -S filename apt-file search filename 查询软件xxx依赖哪些包 apt-cache depends xxx 查询软件xxx被哪些包依赖 apt-cache rdepends xxx 增加一个光盘源 apt-cdrom add 系统升级 apt-get update apt-get upgrade apt-get dist-upgrade 清除所有删除包的残余配置文件 dpkg -l |grep ^rc|awk ''{print $2}'' |tr [&quot;\\n&quot;] [&quot; &quot;]|sudo xargs dpkg -P - 编译时缺少h文件的自动处理 auto-apt run ./configure 查看安装软件时下载包的临时存放目录 ls /var/cache/apt/archives 备份当前系统安装的所有包的列表 dpkg --get-selections | grep -v deinstall &gt; ~/somefile 从上面备份的安装包的列表文件恢复所有包 dpkg --set-selections &lt; ~/somefile dselect 清理旧版本的软件缓存 apt-get autoclean 清理所有软件缓存 apt-get clean 删除系统不再使用的孤立软件 apt-get autoremove 查看包在服务器上面的地址 apt-get -qq --print-uris install ssh | cut -d'' -f2 查看内核 uname -a 查看Ubuntu版本 cat /etc/issue 查看内核加载的模块 lsmod 查看PCI设备 lspci 查看USB设备 lsusb 查看网卡状态 ethtool eth0 查看CPU信息 cat /proc/cpuinfo 显示当前硬件信息 lshw 查看硬盘的分区 fdisk -l 查看IDE硬盘信息 hdparm -i /dev/hda 查看STAT硬盘信息 hdparm -I /dev/sda 或 apt-get install blktool blktool /dev/sda id 查看硬盘剩余空间 df -h df -H 查看目录占用空间 du -hs 目录名 优盘没法卸载 sync fuser -km /media/usbdisk 查看当前的内存使用情况 free -m 查看当前有哪些进程 ps -aux 中止一个进程 kill 进程号 或 killall 进程名 强制中止一个进程 kill -9 进程号 或 killall -9 进程名 查看当前进程的实时状况 top 查看进程打开的文件 lsof -p 配置 ADSL pppoeconf ADSL手工拨号 pon dsl-provider 激活 ADSL /etc/ppp/pppoe_on_boot 断开 ADSL poff 查看拨号日志 plog 根据IP查网卡地址 arping IP地址 查看当前IP地址 ifconfig eth0 查看当前监听80端口的程序 lsof -i :80 查看当前网卡的物理地址 arp -a | awk ''{print $4}'' ifconfig eth0 | head -1 | awk ''{print $5}'' 立即让网络支持nat echo 1 &gt; /proc/sys/net/ipv4/ip_forward iptables -t nat -I POSTROUTING -j MASQUERADE 查看路由信息 netstat -rn route -n 手工增加删除一条路由 route add -net 192.168.0.0 netmask 255.255.255.0 gw 172.16.0.1 route del -net 192.168.0.0 netmask 255.255.255.0 gw 172.16.0.1 修改网卡MAC地址的方法 ifconfig eth0 down #关闭网卡 ifconfig eth0 hw ether 00:AA:BB:CC:DD:EE #然后改地址 ifconfig eth0 up #然后启动网卡 统计当前IP连接的个数 netstat -na|grep ESTABLISHED|awk ''{print $5}''|awk -F: ''{print $1}''|sort|uniq -c|sort -r -n netstat -na|grep SYN|awk ''{print $5}''|awk -F: ''{print $1}''|sort|uniq -c|sort -r -n 统计当前20000个IP包中大于100个IP包的IP地址 tcpdump -tnn -c 20000 -i eth0 | awk -F &quot;.&quot; ''{print $1&quot;.&quot;$2&quot;.&quot;$3&quot;.&quot;$4}'' | sort | uniq -c | sort -nr | awk '' $1 &gt; 100 '' 屏蔽IPV6 echo &quot;blacklist ipv6&quot; | tee /etc/modprobe.d/blacklist-ipv6 添加一个服务 update-rc.d 服务名 defaults 99 删除一个服务 update-rc.d 服务名 remove 临时重启一个服务 /etc/init.d/服务名 restart 临时关闭一个服务 /etc/init.d/服务名 stop 临时启动一个服务 /etc/init.d/服务名 start 配置默认Java使用哪个 update-alternatives --config java 修改用户资料 chfn userid 给apt设置代理 export http_proxy=http://xx.xx.xx.xx:xxx 修改系统登录信息 vi /etc/motd 转换文件名由GBK为UTF8 apt-get install convmv convmv -r -f cp936 -t utf8 --notest --nosmart * 批量转换src目录下的所有文件内容由GBK到UTF8 find src -type d -exec mkdir -p utf8/{} ; find src -type f -exec iconv -f GBK -t UTF-8 {} -o utf8/{} ; mv utf8/* src rm -fr utf8 转换文件内容由GBK到UTF8 iconv -f gbk -t utf8 $i &gt; newfile 转换 mp3 标签编码 apt-get install python-mutagen find . -iname “*.mp3” -execdir mid3iconv -e GBK {} ; 控制台下显示中文 apt-get install zhcon 使用时，输入zhcon即可 快速查找某个文件 whereis filename find 目录 -name 文件名 查看文件类型 file filename 显示xxx文件倒数6行的内容 tail -n 6 xxx 让tail不停地读地最新的内容 tail -n 10 -f /var/log/apache2/access.log 查看文件中间的第五行 ( 含 ) 到第 10 行 ( 含 ) 的内容 sed -n ''5,10p'' /var/log/apache2/access.log 查找包含xxx字符串的文件 grep -l -r xxx . 查找关于xxx的命令 apropos xxx man -k xxx 通过ssh传输文件 scp -rp /path/filename username@remoteIP:/path #将本地文件拷贝到服务器上 scp -rp username@remoteIP:/path/filename /path #将远程文件从服务器下载到本地 查看某个文件被哪些应用程序读写 lsof 文件名 把所有文件的后辍由rm改为rmvb rename ''s/.rm$/.rmvb/'' * 把所有文件名中的大写改为小写 rename ''tr/A-Z/a-z/'' * 删除特殊文件名的文件，如文件名：--help.txt rm -- --help.txt 或者 rm ./--help.txt 查看当前目录的子目录 ls -d */. 或 echo */. 将当前目录下最近30天访问过的文件移动到上级back目录 find . -type f -atime -30 -exec mv {} ../back ; 将当前目录下最近2小时到8小时之内的文件显示出来 find . -mmin +120 -mmin -480 -exec more {} ; 删除修改时间在30天之前的所有文件 find . -type f -mtime +30 -mtime -3600 -exec rm {} ; 查找guest用户的以avi或者rm结尾的文件并删除掉 find . -name ''.avi'' -o -name ''.rm'' -user ''guest'' -exec rm {} ; 查找的不以java和xml结尾,并7天没有使用的文件删除掉 find . ! -name .java ! -name ‘.xml’ -atime +7 -exec rm {} ; 统计当前文件个数 ls /usr/bin|wc -w 统计当前目录个数 ls -l /usr/bin|grep ^d|wc -l 显示当前目录下2006-01-01的文件名 ls -l |grep 2006-01-01 |awk ''{print $8}'' 解压缩 xxx.tar.gz tar -zxvf xxx.tar.gz 解压缩 xxx.tar.bz2 tar -jxvf xxx.tar.bz2 压缩aaa bbb目录为xxx.tar.gz tar -zcvf xxx.tar.gz aaa bbb 压缩aaa bbb目录为xxx.tar.bz2 tar -jcvf xxx.tar.bz2 aaa bbb 特殊 URI 地址 * computer:/// - 全部挂载的设备和网络 * network:/// - 浏览可用的网络 * burn:/// - 一个刻录 CDs/DVDs 的数据虚拟目录 * smb:/// - 可用的 windows/samba 网络资源 * x-nautilus-desktop:/// - 桌面项目和图标 * file:/// - 本地文件 * trash:/// - 本地回收站目录 * ftp:// - FTP 文件夹 * ssh:// - SSH 文件夹 * fonts:/// - 字体文件夹，可将字体文件拖到此处以完成安装 * themes:/// - 系统主题文件夹 详细显示程序的运行信息 strace -f -F -o outfile 设置日期 date -s mm/dd/yy 设置时间 date -s HH:MM 将时间写入CMOS hwclock --systohc 读取CMOS时间 hwclock --hctosys 从服务器上同步时间 ntpdate time.nist.gov ntpdate time.windows.com 从mysql中导出和导入数据 mysqldump 数据库名 &gt; 文件名 #导出数据库mysqladmin create 数据库名 #建立数据库 mysql 数据库名 &lt; 文件名 #导入数据库 忘了mysql的root口令怎么办 /etc/init.d/mysql stop mysqld_safe --skip-grant-tables &amp; mysqladmin -u user password ''newpassword'''' mysqladmin flush-privileges 修改mysql的root口令 mysqladmin -uroot -p password ''你的新密码'' 下载网站文档 wget -r -p -np -k http://www.21cn.com · -r：在本机建立服务器端目录结构； · -p: 下载显示HTML文件的所有图片； · -np：只下载目标站点指定目录及其子目录的内容； · -k: 转换非相对链接为相对链接。 如何删除Totem电影播放机的播放历史记录 rm ~/.recently-used 安装了debian10和ubuntu18后，发现没有ifconfig，感觉很不习惯。 安装ifconfig 1.先更新国内的源，我一般都改成163.com的源，个人习惯，国内还有好多可用的源。 sudo apt install net-tools 然后你就发现ifconfig就又可以用了。 如果你不想用ifconfig，可以试试ip addr ，效果一样。 ———————————————— 版权声明：本文为CSDN博主「Yaser-Z」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。 原文链接：https://blog.csdn.net/lovescorpio/article/details/103823703 ","link":"https://amiao.ioxoo.top/post/debian-chang-yong-zhi-ling/"},{"title":"安装HASSIO","content":"安装HASSIO 以 root 身份运行以下命令。 wget https://code.aliyun.com/neroxps/hassio_install/raw/master/install.sh chmod a+x install.sh ./install.sh 操作说明 停止（但重启依然会自启动） systemctl stop hassio-supervisor.service 重启 systemctl restart hassio-supervisor.service 禁用自启动 systemctl disable hassio-supervisor.service 启用自启动 systemctl enable hassio-supervisor.service 查询当前启动状态 systemctl status hassio-supervisor.service 查询当前是否自启动 systemctl is-enabled hassio-supervisor.service 查询 hassio 日志 docker logs -f hassio_supervisor 查询 hassio 日志最新20行信息 docker logs -f hassio_supervisor --tail 20 查询 ha 日志 docker logs -f homeassistant 查询 ha 日志最新20行信息 docker logs -f homeassistant --tail 20 ","link":"https://amiao.ioxoo.top/post/an-zhuang-hassio/"},{"title":"3.5英寸硬盘功耗，到底多少瓦，附其它功耗参考","content":"最近组NAS，作为24小时运行的小型服务器，功耗是要关注的点 电费一年多少钱 按照河北平均电费0.5元一度电来算，每5瓦的功耗，一年是21.9元，这里约为22元 1瓦 运行一年 电费大约是4.4元 3.5英寸 7200转 8T硬盘功耗 3.5英寸服务器级别的硬盘 7200转 功耗，经过实测，平均大约是8瓦左右，一般单独的硬盘盒供电都是10瓦到15瓦以保证供电充足。传输速度大约220MB/s，大约就是2.5G网口的速度 所以每增加一块3.5英寸硬盘，一年功耗就会增加大约 8*4.4 = 36.2元 电费。 而3.5英寸 NAS专用盘，如酷狼4T 我记得是5900转 功耗，经过实测，大约6瓦左右，传输速度160MB/s，一年耗电 26.4 元 硬盘要不要休眠 所以有人说让硬盘休眠，我不同意，休眠很伤硬盘。解释一下为什么 硬盘休眠的意思是：硬盘断电，死了。然后不休眠就是又活了。如果设置硬盘休眠，可能会经常性的休眠-唤醒-休眠-唤醒，这叫死去活来，反复横跳作死。而且每次启动和停止都消耗硬盘的读写，还有磁盘针头的惯性问题。为什么突然断电就会丢失数据，就像急刹车一样，损耗轮胎，甚至发生车祸。休眠比突然断电好些，就是踩了刹车和汽车启动，轮胎压力没那么大，但也是肯定有损耗的，而且比正常行驶中的消耗要大。如果碰到不明情况，反复开车走走停停他，肯定比你开车跑一段距离再停车对轮胎磨损要大。 万不得已可以设置休眠时间，最好是很长的一段时间，例如设置凌晨到早上8点休眠，白天就不要反复作死了。 简单NAS电费计算 如果4块7200转 8t 硬盘，就是4*8 = 32瓦，按35瓦计算合理，因为8瓦是待机功耗，如918+群晖 4块硬盘，整机功耗大概50瓦，一年就是220元 电费 不到，应该电费在200以内 我估计180元差不多 如果4块5400转nas专用盘，就是24瓦，按25瓦计算，群晖918+下 整机功耗大约40瓦 160元 2块4T还是1块8T？ 按照上面电费计算，应该尽量买大容量硬盘，4T*2和8T，2块硬盘就多出接近8瓦，一年就多出32元电费 1块4T酷狼费用780，一块8T费用1350，怎么选？？？ 可不只是纸面上的差价，电费还有32元的差价，还是按年计算的，正常保底三年，长时间8年都行，差不多100元到240元价格，而且最关键的是硬盘位也不容易扩展 噪声问题 而且硬盘性能过高还有噪声问题，一般不要选择7200转的高性能硬盘，尽量用5400转或者其它低转速机械硬盘挂载。硬盘架尽量稳定，或者添加防震棉之类的 不同3.5硬盘日常待机功耗 根据我不完全测试，给大家尽量准确的参考，都是酷狼NAS盘 5900转，读写的时候稍微增加2瓦左右 4T 6瓦左右 6T 7瓦左右 8T 8瓦左右 可以确定我的日立 10T硬盘 7200转 功耗是10瓦，读写的时候增加3瓦，日常工作温度也比酷狼高10度 附上知名科技媒体HardwareLuxx制作了一期有趣的机械硬盘（HDD）功耗测试，对象涵盖入门消费级4TB到企业数据中心级16TB的机械硬盘，我们看看它们的表现如何： 待机功耗（单位：瓦特） 另外参考一位大大的测试我们计算一下 酷狼有专门的电源管理技术，那么一块酷狼14T 盘耗电为：0.2/24*1000 = 8.333瓦，差不多也是8瓦的电量， 另外希捷酷鱼 pro 10T 7200rpm转速，同样配置256MB的DRAM缓存，耗电量为6.8W，超过220MB/s持续传输速率，参考的koolshare论坛大佬的测试 相较于6T、7T、8T这几个大容量硬盘，10TB的耗电不升反降，看来充气就是牛，容量越大耗电越低，看样子每块盘能少2-3瓦的样子 BB了半天，看看官网的数据 看样子，希捷的盘功耗低的就是1T、4T和10T 只看希捷了，西数红盘走一波 可以看到，市面上的NAS盘大多都是8瓦左右。但是值得注意的是，根据我的经验，紫盘发热量比红盘高5-10°，酷鹰似乎也是这样，因此功耗更高。一般我的经验是，当温度高出10°，那么平均每秒功耗应该是要多出至少5瓦的，如果红盘功耗是6瓦，那么温度高出接近10度的紫盘至少也有11瓦-13瓦左右的耗电。原因除了转速，还可能就是没有做电源管理和温度控制管理。 固态硬盘耗电 ​ 启动功耗 最高功耗 平均功耗 SSD： 0.1W~1W（2W） 5~10W 4~5W左右 平均5瓦，而且随着容量提升而增加，但幅度不大。 2.5英寸机械硬盘耗电 通常为3.5W 内存耗电 都是不带灯条的，而且计算比较偏向于多1瓦左右 DDR3 大概3.5瓦 DDR4 大概3瓦 其它功耗 一般电源+主板功耗是3瓦 神器公式，根据TDP计算空载下CPU耗电：TDP*0.6，结果大约就是空载时候CPU的耗电， 奇葩说 来自某吧友： 黑群 i9 9900t 16g 4盘 内部虚拟 lede旁路由 架设传奇服务器 ，冒险岛服务器，常年工作 50w~~~~ G3930+Z270 itx+2块3.5 4T+2块2.5 1T+1块SSD系统，电源是海韵430W铜牌，Win10，常年30W左右 某网友： Intel 3/4系列那段时间，因为准备装长期开机的虚拟机，测试了一些硬件，感觉是： \\1. 电源的影响大。我接触过的电源在机器闲置情况下的差值超过20w，最好的是银欣ST30SF和贼船RM450，最差是七盟420BKP。因为机器工作在较低的功耗(&lt;40w)，没见过电源评测有测试低负载区的效率。 \\2. 主板。ASUS Z87I-P 在升级BIOS后闲置功耗居然降低了接近10w，不同的型号也会有相当的差距。BIOS的设置也有影响：https://www.gamersnexus.net/guid ... mputing-bios/Page-2 \\3. CPU反而影响很小。同一套配置，CPU不同(G1820 -&gt; i5-4570)，长期运行的平均功耗差值也就是1w多。 要追求低功耗的话，按我自己以往的经验： \\1. 非常看电源在低负载时的效率。负载40-50W时，效率好和坏，可能要差出10W... \\2. 主板供电，一般来说，够用的情况下，相数越少效率越好，好和坏，会差出CPU功耗的10%左右，满载20W的CPU就会差出2W左右 \\3. D3这类的内存，双通道会比单通道多出1-1.5W... 这多的不单单是内存本身的功耗，还有IMC的功耗...还有灯条的LED也耗电... \\4. 风扇，多一个多1-2W... 包括电源里的... \\5. 硬盘这块，变数也蛮大的，古董多碟的硬盘空载7-8W+，现在双碟左右的3-4W左右... \\6. CPU的节能设置，差别要看具体CPU的新老程度了，开了一定有效果...还会因为2而放大效果... \\7. 上面的2-6，最后还会因为电源的效率而放大总的实际输入功耗... 我之前用I3 6100 + B150 + SATA2的SSD + ATX电源（电源里有风扇） + 无扇 + 降压 + 2条灯条@2666，做到过待机11W+... 实战 我的配置是： TDP 35瓦 i3 8100t 主板b250 450瓦电源 两根内存条 2个静音风扇 1个固态500G 请计算功耗多少 我用电压表测试稳定在24瓦 按照推算 35*0.6 = 21瓦 ","link":"https://amiao.ioxoo.top/post/35-ying-cun-ying-pan-gong-hao-dao-di-duo-shao-wa-fu-qi-ta-gong-hao-can-kao/"},{"title":"2020黑群晖最稳定版本_家庭NAS部署指南 —— 如何自己动手安装一台黑群晖主机","content":"2020黑群晖最稳定版本_家庭NAS部署指南 —— 如何自己动手安装一台黑群晖主机... 大家好，上次写了一篇NAS总论。聊了聊NAS的一些常用功能和硬件的选择。作为新手小白来说，我们用手头的主机或者购入了一台类似蜗牛星际的廉价NAS主机之后。该如何装入NAS系统呢？这次我们就来动手组建自己第一个NAS系统。 懒人目录： 1、群辉系统介绍 2、安装工具和软件 3、群晖版本的选择 4、制作启动U盘 5、用U盘引导并安装系统 6、使用注意事项 7、结尾的几句唠叨 一、群晖系统介绍 上次文章提到过，NAS可以分为成品NAS和DIY NAS两种方案。如何可以根据自己的预算和喜欢折腾程度选择。无论你选择成品还是DIY方案，对于初入门的NAS用户来说。第一台NAS的系统我都建议你从群晖系统开始。 群晖系统无论从友好度和便捷性来说都非常好。能让我们非常直观的体验到NAS的便捷性。手机、平板、电脑的跨平台共享方面的体验也做得非常好。（当然，隔壁的威联通似乎也不差。只是我入了群晖的坑而已） 这一篇我们主要介绍下如何DIY一台群晖NAS主机（也就是黑群晖）。想用成品NAS的用户可以略过此此篇，直接去网购一台白群晖NAS主机添加硬盘即可。我下一篇开始会重点介绍群晖NAS的各项功能。 二、安装所需的工具和软件 要搭建群晖系统，我们首先需要一台NAS主机。群晖系统的兼容性还是不错的，几乎所有主机的品牌、配置不限主机内存只要大于1G均可以安装。（群晖nas对硬件要求非常低） 我们需要用一个U盘来安装系统引导文件，U盘大小不限（128MB以上就行）。最好是品牌U盘（兼容性更好）。如果手头没有U盘。读卡器+TF或SD卡也可。（我就是用读卡器+TF卡安装的）。当然群晖的引导文件也可以被装在硬盘上，有些用户就是用固态硬盘作为引导盘使用。 一台可以正常工作的电脑，用来制作引导盘。 所需软件：ChipEasy芯片无忧（查找U盘的VID和PID） DiskGenius （修改grub.cfg配置） Win32 Disk Imager（写入镜像） 三、系统版本的选择 黑群辉DSM系统的引导文件，大致有DSM 5.2、1.02b、1.03b、1.04b，都是由国外大神制作。可以根据你的CPU和主板的型号来选择引导版本。 引导版本: 1.04b 黑群晖系统: DSM 6.2.0--6.2.2 对应机型：DS918+ 引导方式: 传统BIOS和UEFI 此为目前最新版本，对应机型是群晖目前主力机型DS918+。功能相对最强大，intel酷睿4代以上CPU推荐安装。老主机和AMD机型安装此引导程序有可能会无法引导。（我没在在旧机型上安装成功过，也有可能是个人技术问题） ###引导版本: 1.03b 黑群晖系统: DSM 6.2.0--6.2.2 对应机型：DS3617+ DS3615+ 引导方式: 传统BIOS 此版本我没有安装过，建议1.04b 安装不成功可以来试试这个。 引导版本: 1.02b 黑群晖系统: DSM 6.1.7-15284 Update3 对应机型: DS3617+ 引导方式: UEFI 此版本的兼容性甚佳，只要支持UEFI主板基本都能成功引导。目前我的主力nas正在使用的版本，6.17系统基本上也能实现群晖上80%以上的功能。如果1.04b 安装不成功，推荐来试试这个版本。 引导版本: XPEnoboot for DSM 5.2-5967.1 x64 黑群晖系统: DSM 5.2-5967.1 对应机型: DS3615+ 引导方式: 传统BIOS 最初的群晖版本，相对功能最少（但还是具备了大部分基本功能）。因为是传统BIOS引导，所以支持那些不能用UEFI引导的老主板。另外对于一些低功耗低性能的ARM主机，这个版本也是不错的选择。 引导文件一般是img格式，而另外一个Pat格式文件就是就是群晖系统文件。注意：两个文件的版本必须对应才能安装成功 四、安装过程 1、首先我们使用ChipEasy芯片无忧查找U盘的VID和PID 然后DiskGenius编辑配置文件grub.cfg 打开DiskGenius在顶部硬盘菜单中选择“打开虚拟硬盘文件”，然后选择打开下载的img文件打开。 在左边找到刚刚打开的img文件, 点击ESP-grub, 在右边找到grub.cfg, 选择复制到桌面. 用文本编辑器打开刚刚复制到桌面的grub.cfg文件。找到vid和pid的值，将你刚刚在ChipEasy芯片无忧上找到的数值输到这里。（这里只用修改0X后的四位数字） 再把编辑好的grub.cfg文件替换覆盖原文件。其实很多时候，不修改vid和pid的值也可以安装成功。如果你嫌麻烦略过这一步也可以。不过修改了以后有助于安装的顺利进行。 接下来就可以用Win32 Disk Imager磁盘映像工具，将镜像写入U盘。 写入之前请确定好引导U盘已经插入，并且确定盘符正确。 显示写入成功，就说明引导U盘已经制作成功了。 五、安装群晖系统 在安装群晖系统之前，最好对NAS主机的BIOS进行设置。先插入U盘，然后按delete键进入BIOS设置页面。 将Fast boot（快速启动）选项关闭，并且将第一启动盘设置为你刚刚制作的引导盘 系统选择这里，我们选择安卓系统。然后保存重启。 顺利从引导盘启动的话，就会看到这个界面（一闪而过）。全新安装时我们不用理它，默认第一项即可。 显示到这里，就说明引导已经完成。接下来就可以转到网页远程操作了。在看到“Booting the kernel”等待1-2分钟。在浏览器中输入http://find.synology.com/ 搜索新系统即可跳转到群晖页面。 或者去路由器界面中查找新获得设备的IP。找到了IP地址，就可以从另一台电脑的网页登陆。进行下一步安装。 安装时请大家注意，需要下载与之对应的群晖系统文件，否则安装会不成功。这里点击联机——然后设置 注意在这个页面选择手动安装。选择之前下载的.pat文件后点击立即安装。 硬盘数据会被清空，注意要备份原先硬盘中的资料。这里选择“确定” 接下来就耐心等待安装完成，通常需要10-20分钟时间。 安装成功后页面会自动跳转到账户设置界面，设置好服务器名，管理员账户和密码 这里选择跳过。黑群晖也是可以通过“洗白”注册ID实现内网穿透。但个人觉得没有必要。我们可以通过其他软件来实现类似的功能。更何况已经用了别人的系统，就不要再让他们负担服务器费用了。也有人反映这个QuickConnect功能在某些网络环境下也并不好用。 恭喜，安装顺利完成。接下来就可以愉快地使用NAS系统了。 在这之前，我们需要配置一下硬盘空间。 以下步骤基本没有难度，只要花5分钟时间就可以配置完成。 点击左上角的主菜单——选择存储空间管理员 在存储空间中，选择新增 选择“灵活性提高” 关于硬盘模式，有非常多的选择方式。我们今天就不在这里讲了，建议大家去了解下磁盘阵列知识。（SHR是群晖专用RAID模式相当于RAID 5。SHR2有两块校验盘，相当于RAID 6）。 六、使用注意事项 注意黑群晖最好不要更新升级，否则有会造成引导不成功。去计划任何里面关闭DSM自动更新选项。除了不能升级和无法使用官方的内网穿透，黑群晖在使用上与白群晖没有区别。 最后也要感谢下群晖公司对于黑群晖的宽容态度。正因为有群晖NAS，NAS系统才能更好的普及和走进大众的视野。当然现在也有很多黑群晖玩家现在已经转投白群晖，也算是对群晖公司的一些回报吧。 ","link":"https://amiao.ioxoo.top/post/2020-hei-qun-hui-zui-wen-ding-ban-ben-_-jia-ting-nas-bu-shu-zhi-nan-ru-he-zi-ji-dong-shou-an-zhuang-yi-tai-hei-qun-hui-zhu-ji/"},{"title":"我家云刷机及使用教程","content":"**创作立场声明：**我家云，目前经过几个月的发酵，固件方面已经非常多且稳定了。推荐喜欢折腾的朋友上车，价格不贵，挺好玩的！ [ 大家好，俺又来了！ 引子 之前分享过一个50元包邮的矿渣：我家云，也叫联想粒子云，详细链接看这个： 我家云配置，对比N1： 这玩意经过几个月的发酵，目前涨价到60-70元包邮，虽然涨价了一点，但也是超值的。毕竟这玩意，颜值很高，而且可以用3.5寸硬盘。最主要的是，功耗非常的低，垃圾佬非常喜欢。 安装了3.5寸硬盘后，刷了OMV，armbian，openwrt，小钢炮等固件 可以实现非常多的功能。 有人用它建站，有人用它下载，还有人用它当旁路由器，甚至还有人用它接出HDMI接口，来当电视盒子。![我家云 保姆级教程：完美OMV固件推荐+硬改不掉盘实操 超值低功耗NAS 家庭服务器 下载机] 可谓是，百花齐放！拷贝速度，这玩意能到70-90M/s，加上3.5寸盘现在很便宜，所以，家里备一个我家云，也能为自己增加不少乐趣！ 在目前，群晖、威联通，动不动几千售价的市场中，这个我家云，几十块的矿渣产品，买一个来玩，或者给群晖、威联通当备机下载，也是非常不错的！ 今天的内容主要三个方向： 1、从零开始教给大家如何给 我家云 刷机，保姆级教程。 2、推荐 Ride_Wind 大佬的 我家云 固件，这个固件非常稳定，功能多，哪怕不用硬改也很稳定。 3、硬改我家云的实操，有需要硬改的朋友，可以参考这个方案，实测硬改后，写入2T数据无掉盘现象。 也许有人还不知道掉盘是什么意思！这里简单解释下，就是用着用着，这个硬盘消失了，无法拷贝，无法写入数据进去，找不到硬盘信息了，这就叫掉盘。消失后，设备只能重启，非常影响使用。目前的固件，大多都安装了掉盘补丁，还是很不错的。 我们废话少说，进入正题。 一、要准备的东西： **实物一：**我家云一台，某鱼自行购买，建议一次下单2台，1台稳定挂机，1台自己玩。 **实物二：**双公头USB数据线，白菜商品的时候，1-2元一根即可入手。 [ **刷机工具：**我已经打包好，按照我的下载即可，链接如下： **实物三：**安装了windows系统的PC电脑一台！（刷机用，请自备） **实物四：**硬盘一个，推荐3.5寸的硬盘，某鱼有12元包邮的500G 3.5寸硬盘，对数据要求不高的也可以买来玩玩。 以上东西备齐后，就可以愉快的玩耍我家云了。 硬改方面，需要准备一个电烙铁，一把螺丝刀，一根飞线用的线，可以用漆包线，或者干脆用网线。 二、我家云外观展示。 1、我家云，是在某鱼购买的。价格是50包邮入手的，我买了好几台，为了折腾，现在已经涨价到70元左右： [ 2、卖家将硬盘取下来了，其它成色几乎全新，就是有些缺少了固定外壳的螺丝，但是不影响使用： [ 3、IO接口方面，从上到下分别是：重置按钮，USB3.0接口，USB2.0接口，千兆网口，电源口： [ 4、正面是一个开机键和一个电源指示灯： [ 5、顶部有个散热风口，整个我家云外壳都是金属的，质感不错，在矿渣里面，我家云颜值不错： [ 6、拆开外壳，里面有一个4CM的散热风扇和硬盘接口，3.5寸硬盘就放这个里面： 这个外壳有点难取下来，建议大力出奇迹： [ 7、电源方面，是用的12V=3A： [ 8、电源接口： 9、还送一根全新的网线，感觉配件都不错： [ 这个价格，买到这样成色的矿渣，还是很不错的！ 三、开始刷机： 1、先解压一下刷机工具包，安装一下驱动： 2、打开这个文件，点驱动安装，等10秒钟左右，驱动安装完成： 3、打开AndroidTool刷机工具，点击下面箭头空白的地方： 4、上个步骤操作完成后，会弹出选择固件的窗口，我们选择下载的 Ride_Wind 大佬的固件： 选择以后，就准备完成了！ 5、上面刷机工具都准备好了，我们用双公头数据线，连接我家云的USB2.0接口 和 电脑： 6、连接了USB以后，按住重置按钮不动，再接入电源线，这个步骤要一直按着重置键不动： 7、在电脑上，显示了发现一个MASKROM设备，这个时候不要松开手，重置键在出现这个提示后，还要保持10秒钟以上，不然会加载失败。![我家云 保姆级教程：完美OMV固件推荐+硬改不掉盘实操 超值低功耗NAS 家庭服务器 下载机]( 8、开始刷机了，刷机大概3分钟左右，提示下载完成后就刷机结束了： 9、这个时候，我家云的灯就会亮起，我们拔掉数据线和电源： 10、然后，建议把要安装到我家云的硬盘进行格式化一下，在电脑上格式化，我用的易驱线： 11、软件用的DiskGenius，这个格式化很好用： 12、先删除这个硬盘的分区，然后点新建分区，建立一个ext4格式的分区，这个格式是给linux系统下使用的： 13、完成后，记得点击保存更改，格式化就完成了： 14、将硬盘安装到我家云里面，我家云接电源，接网线： 15、在路由器后台管理页面中，找到Chainedbox字样的ip地址，这个就是我家云这台设备的ip地址： 16、肯定有人习惯性的进浏览器输入ip，发现，诶，怎么回事？？我家云呢，嘿嘿不要急： 17、我们打开putty工具，这个是连接linux设备的好工具： 18、打开后，输入ip地址，点登录： 19、出现这个提示，点是： 20、输入账户 root，再输入密码 1234 ，密码默认是隐藏的，输入以后，就会提示自动进进行扩容操作： 21、当弹出这个导航 安装操作的时候，点击 是 即可，等待导航页的安装： 22、安装完成后，我们再到浏览器输入我家云的ip地址，就可以看到下面的页面： 这个导航页和我的小站上的非常的像，功能也很相似！ 安装完成！ 四、固件功能介绍 1、安装完成了，简单介绍下这个固件的功能，第一个控制台按钮就是OMV： 2、用户：admin 密码：openmediavault 3、OMV这个系统，是一个非常轻量开源的NAS系统，我之前已经分享过怎么设置，大家看这个文章即可： &lt; 4、值得注意的是，上文，12步的地方，还需要设置一下SMB共享才可以建立共享，我写漏了： 补充12步设置 5、我家云的读取和写入速度也是挺快的，均在80M-90M/s 左右： 我家云 写入速度 我家云 读取速度 6、我们继续介绍，第二个按钮是可道云，这个用来管理我家云里面的文件，非常的好用： 7、首次进入，会需要设置一下管理员密码： 8、随后就可以管理和操作我家云里面的文件了： 9、第三个按钮，是QB下载工具，非常好用的工具，我下载、挂pt都是用的这个： 用户 admin 密码 adminadmin 10、我家云的QB下载路径，设置要改一下哦，先到OMV里面设置好硬盘共享文件夹后，再设置这个路径： 11、路径是在 ** /sharedfolders/共享文件夹名字** 这个里面，记得用FB进去看看路径有没有共享文件夹： 12、再到QB里面设置一下路径，愉快的下载吧： 13、第四个按钮，是荔枝相册，很好用的相册，我一直在用： 14、我的小站上有演示页面： 15、第五个按钮，是视频，我们点开看看，居然是jellyfin： 16、jellyfin 是非常不错的媒体管理程序，家里的家庭影院，大家可以看我写的这篇文章设置： ![我家云 保姆级教程：完美OMV固件推荐+硬改不掉盘实操 超值低功耗NAS 家庭服务器 下载机](//qna.smzdm.com/201907/06/5d20a564cdfdc9292.jpg_e680.jpg)使用群晖Docker 安装Jellyfin 家庭影院HTPC 比emby plex好用多了大家好，俺又来了，这次给大家分享群晖Docker安装Jellyfin了！这个是算是俺的压轴节目了，最近一口气写了好多关于群晖NAS软件的分享，脑袋都是疼的！关于jellyfin，最开始知道这个的时候，俺已经体验过plex和emby了，这两个软件是不错，但是因为收费，不得不放弃之。引用萌鼠博客的内容：阿文菌| _赞_918 _评论_658 _收藏_7k查看详情 17、由于我家云的显卡不是很强，所以我家云用jellyfin，只推荐内网下本地访问，用源文件的格式进行播放我家云的电影库！不过我现在换了emby会员，其实是一样的，只要不转码，内网播放体验还是很棒的： 18、第六个功能，是探针按钮工具： 19、可以详细看到我家云的系统占用信息，非常的牛X： 20、接下的应用，大家也可以自己测试，我化繁为简，简单说下： 21、AriaNg下载，设置起来比较繁琐，但是设置好了，下载还是不错，一个离线下载工具，最大的亮点是下载百度云的东西： 22、这个是一个office程序，可以直接处理我家云上面的office文件： [](https:// [/p/az50epz5/pic_59/) 23、TR下载，也是适合挂pt的工具，和QB下载很像，一样，要注意路径设置哦： 24、FB文件管理器，这两天刚刚写过一个FB文件管理器的文章： 25、数据库程序，配合博客使用，很不错： 26、h5ai，这个是一个类似网盘分享的程序，也很棒，可以分享一些东西出去： 27、易有云，这个是恩山上现在主推的文件管理程序，自带内网穿透功能，无需公网，可以多设备访问我家云里面的文件： 28、wordpress，博客程序，可以建立属于自己的博客： 29、nextcloud，又是一个文件管理器程序，访问NAS里的文件： 30、超级终端，可以无需putty工具，直接属于命令行来设置我家云： 差不多就介绍到这里了，这个固件集成度非常的高，而且它自己还是一个armbian系统，也可以自己玩很多功能。 目前我觉得Ride_Wind 大佬已经非常牛逼的把这些功能都加入了，让小白可以省下非常多的折腾时间，大家直接用这些功能了，非常感谢Ride_Wind大佬的缝隙。佩服佩服啊！ 刷机完成，已经可以愉快的玩耍了！ 五、硬改实操： 我家云掉盘后，出现了很多大神，分享了掉盘硬改的解决方案，有用换电源的，有用飞线等方法的，而在矿渣论坛中，出现一个硬改的方法，已经得到多数人的实测，能保持稳定不掉盘。 但，这个方案也不是百分百能成功，和固件和硬盘方面也有多个因素。目前的比例是 8：2。至少8成硬改用户，没有出过掉盘情况，还是不错的成绩。 我也不废话了，不建议新手，直接来硬改，最好有一点焊接基础，虽然我也是个菜鸟，但目前也改造成功了。 1、这是我重金购买的工具台，就用来折腾我家云： 2、拆开外壳后，需要拆掉2颗螺丝，下图绿色框框处： 3、背面也有4颗螺丝需要拆除： 4、把线都拔下来，主要硬改的就下面3个地方： 其中，右下方的芯片，是需要焊接下来，并且短接2个触点： 左下角和上边，是需要进行飞线连接： 5、先用风枪工具，将这个芯片吹下来，用电烙铁也可以弄下来： 6、吹下来以后，风枪就没有用了： 7、然后将这2个地方，用电烙铁加焊锡，进行短接，这一处地方就处理好了： 8、我用漆包线进行飞线，没有这个线的朋友，也可以用网线，或者比较细的线： 9、飞线的主要是下面这2个触点，其中左边这个，是串联，接旁边的也可以，这些触点非常的小，飞线一定要小心： 10、飞线完成，大家参考我这2张图操作即可： 11、最后，用万用表检查一下，飞线的触点是不是正常，就完成了： 硬改完成，将主板，螺丝安装好，可以正常使用了，就是这么简单！ 这里非常感谢momo大佬热心分享的硬改方案，我只是搬运这个技巧，原理并不懂，希望大家按需使用。 操作有风险，大家操作时候，切记谨慎小心点！ 六、总结： 又到了总结的时候了！ 总结开头，不得不感谢一下 热心的Ride_Wind 大佬，这个固件真的是很不错！ 还得感谢wdmomo大佬的热心分享 硬改方案。 我家云目前已经稳定挂机很久了，我的设备挺多的，所以对我家云的需求并不多，但这个玩意可以用来当我下载机。 家里设备少的朋友，也可以直接用我家云当媒体管理器。 而对linux有想法，学习的朋友，完全可以用我家云学习linux方面的技术。 毕竟这玩意，动不动就要命令行，敲代码，我也是在折腾我家云的过程中，大大的学习了linux 方面的知识了。 我家云，最终怎么玩，还是看各位自己的玩法。非常感谢大家的观看。 如果觉得这篇文章对您有一点点用处的话，**欢迎点赞、评论、收藏、一条龙哦。 ** 最后说一下，关于硬改方面，请一定要小心，小心，再小心。我这里建议，可以不需要硬改，先这样用，当出现了掉盘等情况后，不到迫不得已，再选择硬改的方案。我们下次再见！ 希望大家在新的一年里折腾愉快！拜拜！ ","link":"https://amiao.ioxoo.top/post/wo-jia-yun-shua-ji-ji-shi-yong-jiao-cheng/"},{"title":"debian系linux，更换apt-get官方源为国内源","content":"1. 更换apt-get官方源为163源 操作前做好相应备份 # mv /etc/apt/sources.list /etc/apt/sources.list.bak1 以Jessie为例，编辑/etc/apt/sources.list文件 # vim /etc/apt/sources.list # 在文件最前面，添加以下条目 deb http://mirrors.163.com/debian/ jessie main non-free contrib deb http://mirrors.163.com/debian/ jessie-updates main non-free contrib deb http://mirrors.163.com/debian/ jessie-backports main non-free contrib deb-src http://mirrors.163.com/debian/ jessie main non-free contrib deb-src http://mirrors.163.com/debian/ jessie-updates main non-free contrib deb-src http://mirrors.163.com/debian/ jessie-backports main non-free contrib deb http://mirrors.163.com/debian-security/ jessie/updates main non-free contrib deb-src http://mirrors.163.com/debian-security/ jessie/updates main non-free contrib1234567891011 更新软件源 # apt-get update1 2. 其他版本源 squeeze deb http://mirrors.163.com/debian/ squeeze main non-free contrib deb http://mirrors.163.com/debian/ squeeze-updates main non-free contrib deb http://mirrors.163.com/debian/ squeeze-lts main non-free contrib deb-src http://mirrors.163.com/debian/ squeeze main non-free contrib deb-src http://mirrors.163.com/debian/ squeeze-updates main non-free contrib deb-src http://mirrors.163.com/debian/ squeeze-lts main non-free contrib deb http://mirrors.163.com/debian-security/ squeeze/updates main non-free contrib deb-src http://mirrors.163.com/debian-security/ squeeze/updates main non-free contrib deb http://mirrors.163.com/debian-backports/ squeeze-backports main contrib non-free deb-src http://mirrors.163.com/debian-backports/ squeeze-backports main contrib non-free12345678910 wheezy deb http://mirrors.163.com/debian/ wheezy main non-free contrib deb http://mirrors.163.com/debian/ wheezy-updates main non-free contrib deb http://mirrors.163.com/debian/ wheezy-backports main non-free contrib deb-src http://mirrors.163.com/debian/ wheezy main non-free contrib deb-src http://mirrors.163.com/debian/ wheezy-updates main non-free contrib deb-src http://mirrors.163.com/debian/ wheezy-backports main non-free contrib deb http://mirrors.163.com/debian-security/ wheezy/updates main non-free contrib deb-src http://mirrors.163.com/debian-security/ wheezy/updates main non-free contrib12345678 3. 其他第三方国内源 http://blog.csdn.net/xiayaobo/article/details/46970663 ","link":"https://amiao.ioxoo.top/post/debian-xi-linuxgeng-huan-apt-get-guan-fang-yuan-wei-guo-nei-yuan/"},{"title":"linux用netstat查看服务及监听端口","content":"linux用netstat查看服务及监听端口 [root@localhost ~]# netstat -nlp netstat命令各个参数说明如下： -t : 指明显示TCP端口 -u : 指明显示UDP端口 -l : 仅显示监听套接字(所谓套接字就是使应用程序能够读写与收发通讯协议(protocol)与资料的程序) -p : 显示进程标识符和程序名称，每一个套接字/端口都属于一个程序。 -n : 不进行DNS轮询(可以加速操作) 即可显示当前服务器上所有端口及进程服务，于grep结合可查看某个具体端口及服务情况·· [root@localhost ~]# netstat -nlp |grep LISTEN //查看当前所有监听端口· [root@localhost ~]# netstat -nlp |grep 80 //查看所有80端口使用情况· [root@localhost ~]# netstat -an | grep 3306 //查看所有3306端口使用情况· ","link":"https://amiao.ioxoo.top/post/linux-yong-netstat-cha-kan-fu-wu-ji-jian-ting-duan-kou/"},{"title":"Rclone 使用教程 - 常用命令参数","content":" 设置 命令 说明 rclone config 添加、删除、管理网盘等操作 rclone config file 显示配置文件的路径 rclone config show 显示配置文件信息 root@SunPma:~# rclone config Current remotes: Name Type ==== ==== DB dropbox GD drive e) Edit existing remote n) New remote d) Delete remote r) Rename remote c) Copy remote s) Set configuration password q) Quit config e/n/d/r/c/s/q&gt; 语法 # 本地到网盘 rclone [功能选项] &lt;本地路径&gt; &lt;配置名称:路径&gt; [参数] [参数] # 网盘到本地 rclone [功能选项] &lt;配置名称:路径&gt; &lt;本地路径&gt; [参数] [参数] # 网盘到网盘 rclone [功能选项] &lt;配置名称:路径&gt; &lt;配置名称:路径&gt; [参数] [参数] # [参数]为可选项 示例 # 复制到网盘，并显示实时传输进度，设置并行上传数为8 rclone copy -P /home/SunPma GD:/home/SunPma --transfers=8 # 如果需要服务端对服务端的传输可加以下参数（不消耗本地流量） rclone copy 配置名称:网盘路径 配置名称:网盘路径 --drive-server-side-across-configs 功能 命令 说明 rclone copy 复制 rclone move 移动，如果要在移动后删除空源目录，加上 --delete-empty-src-dirs 参数 rclone sync 同步：将源目录同步到目标目录，只更改目标目录 rclone size 查看网盘文件占用大小 rclone delete 删除路径下的文件内容 rclone purge 删除路径及其所有文件内容 rclone mkdir 创建目录 rclone rmdir 删除目录 rclone rmdirs 删除指定环境下的空目录。如果加上 --leave-root 参数，则不会删除根目录 rclone check 检查源和目的地址数据是否匹配 rclone ls 列出指定路径下的所有的文件以及文件大小和路径 rclone lsl 比上面多一个显示上传时间 rclone lsd 列出指定路径下的目录 rclone lsf 列出指定路径下的目录和文件 参数 命令 说明 -n = --dry-run 测试运行，查看Rclon在实际运行中会进行哪些操作 -P = --progress 显示实时传输进度，500mS刷新一次，否则默认1分钟刷新一次 --cache-chunk-size SizeSuffi 块的大小，默认5M越大上传越快，占用内存越多，太大可能会导致进程中断 --cache-chunk-total-size SizeSuffix 块可以在本地磁盘上占用的总大小，默认10G --transfers=N 并行文件数，默认为4 --config string 指定配置文件路径，string为配置文件路径 --ignore-errors 跳过错误 日志 有4个级别的日志记录：ERROR NOTICE INFO DEBUG 默认情况下Rclon将生成ERROR NOTICE日志 命令 说明 -q rclone将仅生成ERROR消息 -v rclone将生成ERROR NOTICE INFO 消息 -vv rclone 将生成ERROR NOTICE INFO DEBUG 消息 --log-level LEVEL 标志控制日志级别 输出日志到文件 使用--log-file=FILE选项rclone会将Error Info Debug消息以及标准错误重定向到FILE 这里的FILE是你指定的日志文件路径 过滤 命令 说明 --exclude 排除文件或目录 --include 包含文件或目录 --filter 文件过滤规则，相当于上面两个选项的其它使用方式。包含规则以+开头，排除规则以-开头 文件类型过滤 比如--exclude &quot;*.bak&quot; --filter &quot;- *.bak&quot;排除所有bak文件 比如--include &quot;*.{png,jpg}&quot; --filter &quot;+ *.{png,jpg}&quot;包含所有png和jpg文件，排除其他文件 --delete-excluded删除排除的文件。需配合过滤参数使用，否则无效 目录过滤 目录过滤需要在目录名称后面加上/否则会被当做文件进行匹配 以/开头只会匹配根目录（指定目录下），否则匹配所目录，这同样适用于文件 --exclude &quot;.git/&quot;排除所有目录下的.git目录 --exclude &quot;/.git/&quot;只排除根目录下的.git目录 --exclude &quot;{Video,Software}/&quot;排除所有目录下的Video和Software目录 --exclude &quot;/{Video,Software}/&quot;只排除根目录下的Video和Software目录 --include &quot;/{Video,Software}/**&quot;仅包含根目录下的Video和Software目录的所有内容 大小过滤 默认大小单位为kBytes但可以使用k M或G后缀 --min-size过滤小于指定大小的文件。比如--min-size 50表示不会传输小于50k的文件。 --max-size过滤大于指定大小的文件。比如--max-size 1G表示不会传输大于1G的文件。 实际使用中发现大小过滤两个选项不能同时使用 过滤规则文件 --filter-from &lt;规则文件&gt;从文件添加包含/排除规则 比如--filter-from filter-file.txt 过滤规则文件示例： - secret*.jpg + *.jpg + *.png + file2.avi - /dir/Trash/** + /dir/** - * 环境变量 rclone中的每个选项都可以通过环境变量设置。环境变量的名称可以通过长选项名称进行转换，删除--前缀，更改-为_大写并添加前缀RCLONE_环境变量的优先级会低于命令行选项，即通过命令行追加相应的选项时会覆盖环境变量设定的值。 比如设置最小上传大小--min-size 50使用环境变量是RCLONE_MIN_SIZE=50当环境变量设置后，在命令行中使用--min-size 100那么此时环境变量的值就会被覆盖 常用环境变量 命令 说明 RCLONE_CONFIG 自定义配置文件路径 RCLONE_CONFIG_PASS 若 rclone 进行了加密设置，把此环境变量设置为密码，可自动解密配置文件 RCLONE_RETRIES 上传失败重试次数，默认 3 次 RCLONE_RETRIES_SLEEP 上传失败重试等待时间，默认禁用，单位s、m、h分别代表秒、分钟、小时 CLONE_TRANSFERS 并行上传文件数 RCLONE_CACHE_CHUNK_SIZE 块的大小，默认5M RCLONE_CACHE_CHUNK_TOTAL_SIZE 块可以在本地磁盘上占用的总大小，默认10G RCLONE_IGNORE_ERRORS=true 跳过错误 ","link":"https://amiao.ioxoo.top/post/rclone-shi-yong-jiao-cheng-chang-yong-ming-ling-can-shu/"}]}